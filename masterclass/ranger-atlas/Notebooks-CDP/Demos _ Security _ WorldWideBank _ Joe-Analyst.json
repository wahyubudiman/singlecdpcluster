{"paragraphs":[{"text":"%md\n### Objective: Implement appropriate data security controls across the enterprise\n### Purpose:\n#### -Protect sensitive data through anonymization and pseudonymization\n#### -Implement policy based controls to grant and monitor data access\n### Solutions: \n#### -Classification/Tagging of sensitive columns in Apache Atlas \n#### -Policies in Apache Ranger for:\n#####    - dynamic classification based authorization of Hive tables/columns, \n#####    - dynamic classification based masking of Hive columns, \n#####    - prohibition of toxic joins of Hive columns\n\n","user":"joe_analyst","dateUpdated":"2019-09-05T06:54:13+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Objective: Implement appropriate data security controls across the enterprise</h3>\n<h3>Purpose:</h3>\n<h4>-Protect sensitive data through anonymization and pseudonymization</h4>\n<h4>-Implement policy based controls to grant and monitor data access</h4>\n<h3>Solutions:</h3>\n<h4>-Classification/Tagging of sensitive columns in Apache Atlas</h4>\n<h4>-Policies in Apache Ranger for:</h4>\n<h5>- dynamic classification based authorization of Hive tables/columns,</h5>\n<h5>- dynamic classification based masking of Hive columns,</h5>\n<h5>- prohibition of toxic joins of Hive columns</h5>\n"}]},"apps":[],"jobName":"paragraph_1567666453211_1854018501","id":"20180416-122010_1467364273","dateCreated":"2019-09-05T06:54:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:13220"},{"text":"%md\n### Dynamic classification based masking policies\n1. HR can veiw PII data unmasked\n2. Analysts see columns tagged as PII (with type attribute of MRN) as null\n3. Analysts see columns tagged as PII (with type attribute of password) as hashed value\n![](https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/cdp/screenshot-tag-masking-policy.png)\n\n### Hive masking policy:\nCan do masking of specific hive columns in variety of formats:\n-redact\n-show last 4\n-show first 4\n-hash\n-nullify\n-show only year\n-custom\n![](https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/cdp/screenshot-hive-masking-policy.png)\n","user":"joe_analyst","dateUpdated":"2020-01-08T22:54:18+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h3>Dynamic classification based masking policies</h3>\n<ol>\n<li>HR can veiw PII data unmasked</li>\n<li>Analysts see columns tagged as PII (with type attribute of MRN) as null</li>\n<li>Analysts see columns tagged as PII (with type attribute of password) as hashed value<br />\n<img src=\"https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/cdp/screenshot-tag-masking-policy.png\" alt=\"\" /></li>\n</ol>\n<h3>Hive masking policy:</h3>\n<p>Can do masking of specific hive columns in variety of formats:<br />\n-redact<br />\n-show last 4<br />\n-show first 4<br />\n-hash<br />\n-nullify<br />\n-show only year<br />\n-custom<br />\n<img src=\"https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/cdp/screenshot-hive-masking-policy.png\" alt=\"\" /></p>\n\n</div>"}]},"apps":[],"jobName":"paragraph_1567666453214_-890147581","id":"20180416-133153_2049561729","dateCreated":"2019-09-05T06:54:13+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13221","dateFinished":"2020-01-08T22:54:20+0000","dateStarted":"2020-01-08T22:54:18+0000"},{"text":"%md\n### Objective: Establish an Enterprise Data Catalog to define enterprise data footprint\n### Purpose: \n####  - Identify and classify sensitive data\n####  - Identify and map sources that contain personal data\n### Solution: Use Atlas to capture classifications and attributes related to sensitive and personal data\n![](https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/cdp/screenshot-Atlas-tags-beta.png)","user":"joe_analyst","dateUpdated":"2020-01-08T22:59:43+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h3>Objective: Establish an Enterprise Data Catalog to define enterprise data footprint</h3>\n<h3>Purpose:</h3>\n<h4>- Identify and classify sensitive data</h4>\n<h4>- Identify and map sources that contain personal data</h4>\n<h3>Solution: Use Atlas to capture classifications and attributes related to sensitive and personal data</h3>\n<p><img src=\"https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/cdp/screenshot-Atlas-tags-beta.png\" alt=\"\" /></p>\n\n</div>"}]},"apps":[],"jobName":"paragraph_1567666453214_-754850835","id":"20180418-235332_2092468851","dateCreated":"2019-09-05T06:54:13+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13222","dateFinished":"2020-01-08T22:59:43+0000","dateStarted":"2020-01-08T22:59:43+0000"},{"text":"%md\n### Sample queries analyst would run","user":"joe_analyst","dateUpdated":"2019-09-05T06:54:13+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Sample queries analyst would run</h3>\n"}]},"apps":[],"jobName":"paragraph_1567666453214_-945425967","id":"20180416-121930_2070802497","dateCreated":"2019-09-05T06:54:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:13223"},{"title":"BMI by ZipCode (US only)","text":"%jdbc(hive)\nselect lpad(zipcode,5,\"0\"), avg((weight*4500/(height*height))) as bmi\nfrom worldwidebank.us_customers\ngroup by lpad(zipcode,5,\"0\") ","user":"joe_analyst","dateUpdated":"2020-01-08T18:38:07+0000","config":{"editorSetting":{"editOnDblClick":false,"language":"sql","completionSupport":true},"colWidth":6,"editorMode":"ace/mode/sql","editorHide":false,"fontSize":9,"title":true,"results":[{"graph":{"mode":"multiBarChart","height":274,"optionOpen":false,"keys":[{"name":"_c0","index":0,"aggr":"sum"}],"values":[{"name":"bmi","index":1,"aggr":"sum"}],"groups":[],"scatter":{"yAxis":{"name":"bmi","index":1,"aggr":"sum"}},"setting":{"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"_c0\tbmi\n00875\t28.215129026817337\n01002\t22.898148125214696\n01013\t29.1421318190166\n01056\t25.98855981474307\n01069\t27.22983213703566\n01071\t28.8372878700331\n01082\t28.8736303871439\n01103\t27.62286860998024\n01105\t25.183882975542456\n01201\t22.640138408304498\n01226\t26.556466978326018\n01238\t19.735939643347052\n01315\t19.618383742911153\n01331\t29.233143953471085\n01430\t23.702479338842974\n01432\t30.653217252349393\n01463\t30.159438516775527\n01501\t25.901309748852285\n01507\t24.312724896675924\n01510\t27.25032886270697\n01520\t31.669421487603305\n01524\t23.80385434853122\n01540\t34.97520661157025\n01543\t30.017709563164107\n01550\t35.570247933884296\n01562\t20.294744318181817\n01569\t20.654296875\n01588\t31.206145314622002\n01608\t28.221369980210145\n01609\t28.664731241978757\n01610\t27.24204458820054\n01740\t28.89339815236722\n01748\t31.45619253650622\n01749\t24.777362826773917\n01752\t30.112838600151576\n01754\t25.02190167617104\n01757\t24.501441593891713\n01760\t24.20279871463527\n01776\t26.431055600944624\n01821\t28.61195602297452\n01824\t26.394721183223993\n01830\t31.679256889288904\n01862\t28.845886607770133\n01865\t27.655337582691477\n01867\t23.844319944883853\n01876\t20.455994897959183\n01880\t24.986289638575222\n01886\t29.55592728190885\n01890\t27.689982646313418\n01901\t20.603766673788957\n01915\t26.528276829197587\n01938\t20.048374092985757\n01944\t26.99521502835539\n01945\t22.846204093482363\n01960\t28.333484868834933\n01970\t28.029336734693878\n02026\t26.710769713474107\n02035\t27.139246123807443\n02038\t30.33968794598908\n02043\t25.405751466768606\n02050\t28.019255389013367\n02072\t32.51912720966635\n02081\t24.89455956893118\n02109\t26.54284339300209\n02114\t29.06949545814167\n02115\t27.967629372816866\n02132\t28.73894441729336\n02135\t26.57541394437294\n02141\t27.572663764328336\n02142\t28.02299653241108\n02148\t31.42062169721365\n02150\t28.6080592630969\n02169\t26.077409558338765\n02173\t30.738417119877898\n02174\t21.95948964538828\n02178\t25.594695050498533\n02189\t24.841050578222095\n02192\t27.60151584400488\n02199\t26.149508319989266\n02210\t26.012305008441594\n02215\t22.418148294636413\n02327\t34.985207100591715\n02333\t28.03124215804123\n02364\t21.259105098855358\n02401\t28.11041343558114\n02421\t28.510575590685207\n02494\t35.5870761451517\n02539\t29.08144290119242\n02554\t31.274460295417246\n02571\t27.492215253716942\n02645\t22.41641806594626\n02653\t30.566156647176218\n02702\t22.889896699420508\n02720\t25.06826449869587\n02740\t22.15481825022295\n02769\t28.17055057090046\n02780\t29.82255118764707\n02790\t25.36111111111111\n02816\t32.51953125\n02852\t31.583428383016997\n02871\t22.45560353455918\n02891\t21.655269129625296\n02895\t29.157661617771005\n02903\t27.763668195006076\n02905\t28.020771217711136\n02909\t31.562669010275826\n02910\t28.76138884396343\n02911\t31.367383796107454\n02919\t25.54725743786683\n03034\t29.214140131644893\n03038\t27.89821072627865\n03049\t32.61220102123085\n03053\t26.260074207616054\n03054\t27.757264103499235\n03070\t40.6264308012487\n03079\t34.59861591695502\n03101\t26.941439651455934\n03216\t26.501178279277838\n03244\t21.03427597525565\n03253\t19.26177878558831\n03263\t20.024023808670083\n03266\t24.06770455544419\n03431\t27.863668164454467\n03444\t31.459591836734695\n03470\t35.70154577883472\n03576\t30.40497448979592\n03595\t26.58967955879229\n03602\t33.327136289886425\n03603\t29.970588545470854\n03608\t25.634722483261896\n03741\t22.837308650765397\n03755\t22.147623041786844\n03784\t25.740202114815432\n03785\t27.114816888566864\n03820\t29.880535539182507\n03824\t25.293891776937617\n03850\t24.900908211354203\n03855\t20.430747922437675\n03857\t21.39945652173913\n03886\t26.71584452479339\n04020\t21.774193548387096\n04021\t32.261527622388115\n04032\t28.761188481226228\n04039\t39.83083429450212\n04043\t25.97122024613248\n04084\t31.74541097025144\n04092\t26.997916827314896\n04096\t31.995884773662553\n04101\t26.303977983483954\n04106\t26.03278804326733\n04219\t32.13296398891967\n04260\t23.142857142857142\n04280\t18.714555765595463\n04282\t29.60128159487362\n04355\t29.765426880811496\n04408\t21.23309216734822\n04410\t19.005102040816325\n04421\t26.73634766395353\n04441\t31.046597633136095\n04493\t28.371524742592943\n04496\t36.691329565734684\n04530\t33.88939171686277\n04543\t34.29551020408163\n04568\t33.843638525564806\n04652\tnull\n04654\t29.84908109862469\n04658\t30.322265625\n04676\t25.240484429065745\n04732\t27.365628025386354\n04743\t27.73160972606956\n04745\t29.08328826392645\n04758\t25.651615328593408\n04769\t31.655287019769386\n04776\t28.56461151245268\n04841\t27.619576189984308\n04849\t24.181061394380855\n04860\t23.167044595616023\n04861\t24.00566119901292\n04912\t26.869512997226114\n04937\t19.99078673289537\n04943\t34.89759096528451\n04945\t29.493149812987088\n04947\t26.29040627575471\n04949\t21.395617070357556\n04958\t40.60546875\n04970\t25.924744897959183\n05001\t28.125414366880978\n05040\t25.00724779222286\n05051\t34.85245078704866\n05070\t31.499569089342142\n05153\t28.254632031989257\n05301\t28.097246997195448\n05350\t21.725626038945318\n05403\t27.6873037336691\n05446\t26.58335267946319\n05452\t30.247363214498897\n05464\t28.035875961973744\n05470\t24.449803119562894\n05478\t22.486935694585572\n05482\t20.676185840552414\n05647\t32.62759627828214\n05667\t18.457336108220602\n05673\t24.494649227110582\n05676\t18.856418306967758\n05734\t28.967085132545968\n05757\t31.484513348257543\n05762\t22.795005202913632\n05764\tnull\n05773\t25.69805996472663\n05777\t28.78599088624037\n05821\t32.06019772614928\n05824\t28.552882469877073\n05841\t28.344238215866476\n05871\t21.703533467394426\n06010\t22.62855424504661\n06040\t27.976423116348133\n06062\t32.70251304767335\n06070\t29.033678435386797\n06076\t31.85727615724776\n06082\t27.53499559312037\n06103\t28.807765761435956\n06105\t25.7925990657803\n06111\t27.019621303292638\n06182\t30.18863411430119\n06239\t28.809891226617488\n06256\t26.839067451335445\n06281\t28.742788141498988\n06320\t30.7171414211308\n06340\t26.22364278236855\n06355\t29.400231084345787\n06357\t28.94947519542594\n06413\t24.912715828239325\n06416\t19.149838098490427\n06424\t27.99457648949856\n06450\t28.249120518869898\n06460\t27.741093273546873\n06471\t30.713757396449704\n06473\t30.061548050045044\n06475\t27.678658072034963\n06483\t24.15659928872115\n06488\t21.57620984347711\n06489\t31.21811224489796\n06492\t28.154940567804555\n06511\t27.94757672366921\n06512\t27.930228531855956\n06515\t26.896924377995262\n06516\t25.90185703130861\n06524\t28.004871943667617\n06606\t27.968824183069852\n06702\t30.61046841395851\n06757\t25.534934831049114\n06762\t31.266617969320674\n06787\t21.175729141136514\n06790\t21.91894267171444\n06795\t25.541666666666668\n06804\t28.139290782477705\n06820\t28.544923301680058\n06840\t27.124897959183674\n06897\t30.55736058601134\n06901\t27.190993739743373\n07003\t28.986429366206934\n07016\t35.28520552978522\n07032\t27.633462960325645\n07036\t30.460050055165098\n07039\t27.83946548591918\n07042\t28.173148166611643\n07055\t29.670994373507163\n07065\t31.07184421656018\n07080\t37.08847736625514\n07094\t30.533534494965384\n07095\t27.287150247261657\n07109\t30.063106965702463\n07110\t25.872022022250334\n07111\t31.08729607895661\n07201\t27.867252042997574\n07305\t28.83379740070276\n07306\t32.804033686693835\n07416\t20.599301263101317\n07436\t32.470768403968776\n07442\t20.288210149126577\n07461\t26.424328298952656\n07470\t19.848295229083362\n07475\t28.59668779104373\n07477\t28.22811102468679\n07480\t26.13236884802596\n07601\t29.726793646343715\n07624\t22.856758935769953\n07628\t28.08633075597705\n07631\t27.802358538917115\n07719\t31.89802289281998\n07726\t25.093934721006402\n07734\t20.63020408163265\n07735\t27.58778424261303\n07801\t26.14298435701369\n07821\t39.09090909090909\n07823\t29.742829674731613\n07849\t39.44805194805195\n07863\t23.116091046539545\n07876\t22.31926901370599\n07924\t27.757469650359738\n07940\t27.292468639789377\n07946\t29.569768922173164\n07960\t25.85559283029716\n07981\t23.675052491453346\n08009\t23.82151238842721\n08014\t26.37958901728516\n08016\t41.00369183334009\n08037\t30.386938775510203\n08052\t29.288814614166068\n08053\t28.76574152480247\n08057\t35.60877501352082\n08070\t23.027344123638567\n08077\t21.85123966942149\n08090\t35.830042042548186\n08102\t28.51780063904388\n08109\t30.55309855519614\n08110\t28.745416331097257\n08202\t26.829971250496357\n08215\t24.49008905486929\n08251\t22.35037878787879\n08260\t25.30881930479747\n08349\t24.28246850880417\n08401\t31.000936026193173\n08505\t23.708545918367346\n08525\t30.831694876451667\n08530\t32.96207409410492\n08533\t25.578497686009257\n08534\t30.53727154265094\n08610\t25.63735691987513\n08640\t25.72369595230192\n08809\t27.19275646056745\n08829\t18.0\n08833\t26.419846411336106\n08840\t31.32196801413188\n08852\t41.42789127423823\n08854\t28.2495020895787\n08863\t24.303361103131284\n08865\t23.156300892826437\n08872\t26.249014697102375\n08882\t22.710379528788565\n08884\t27.07175598377249\n10005\t26.575632228802167\n10007\t27.90032919365745\n10013\t28.261194930269042\n10014\t25.79436395490485\n10016\t28.722937121823254\n10018\t29.491597669373068\n10019\t28.29277192818975\n10021\t27.490331675151022\n10023\t28.483420985327577\n10029\t29.30410830482856\n10033\t28.246818804443578\n10107\t22.891257094553797\n10121\t37.700153776994426\n10281\t23.275862068965516\n10314\t29.234970525528645\n10452\t29.437298837795748\n10453\t28.818911695510355\n10461\t25.751335467077812\n10463\t28.884555718501478\n10504\t32.55655527686807\n10509\t27.963932787642978\n10516\t22.624984219164247\n10528\t26.334882914241195\n10562\t22.433507426639295\n10570\t27.870292674580593\n10578\t30.48469387755102\n10580\t31.469969151662088\n10583\t28.949296230505222\n10590\t33.56139053254438\n10601\t27.094453651901503\n10603\t24.597547360013294\n10606\t26.328705673902864\n10641\t30.73370094334348\n10701\t25.743292849695692\n10914\t23.170639732049246\n10920\t39.08864364542542\n10921\t32.132746146586975\n10952\t29.420878444267213\n10962\t28.242758838265683\n10963\t19.058308787783464\n10970\t39.64334705075446\n10973\t18.330578512396695\n10992\t25.32875042540597\n10994\t26.083422212629\n11030\t31.284988465355646\n11042\t37.546875\n11050\t27.94736842105263\n11101\t28.4658787213759\n11103\t27.148969388948004\n11111\t27.856401384083046\n11206\t28.22295259301276\n11208\t28.968624108377476\n11212\t31.651662966812346\n11213\t27.32370650361214\n11221\t29.138483446066214\n11223\t26.77211581914696\n11230\t28.849498077633786\n11235\t29.123230540744274\n11238\t25.236620526150897\n11354\t26.753363847860967\n11357\t29.631938472015715\n11365\t23.4552460789616\n11375\t32.57197892467669\n11418\t28.16015625\n11420\t32.66766371430169\n11426\t34.09723393489627\n11430\t35.991192743422786\n11432\t24.77447006844064\n11501\t28.893820646125345\n11530\t28.648849001208106\n11542\t19.49890430971512\n11563\t30.528165226433362\n11576\t29.531636730875636\n11598\t26.089380524358216\n11691\t28.669781898513225\n11693\t28.579942434490135\n11702\t25.00412488100514\n11714\t29.28062491747759\n11731\t25.14491135740395\n11743\t29.05308753887526\n11746\t31.209768152737155\n11747\tnull\n11756\t28.89937641925752\n11757\t28.64635888783917\n11766\t36.25443957483439\n11770\t25.671548514951347\n11771\t26.94707070010265\n11772\t28.050209861428083\n11787\t31.696247828740212\n11791\t27.669218267034022\n11793\t33.50147857406465\n11801\t23.27005165824481\n11803\t41.581685744016646\n11935\t34.857440166493234\n11963\t29.60330578512397\n11978\t35.044642857142854\n11980\t23.937355736875652\n12018\t32.30095137120908\n12022\t32.73484630853203\n12032\t34.75052052349792\n12035\t26.275510204081634\n12053\t22.298517471623924\n12061\t24.691358024691358\n12066\t23.246987240075615\n12068\t38.19700368530684\n12074\t36.62217534179886\n12078\t18.46018991964938\n12090\t23.239669421487605\n12092\t27.90221471379197\n12108\t22.519596458121644\n12110\t28.793340984618688\n12117\t32.77931671283472\n12143\t29.408862908406608\n12148\t29.712041017810915\n12195\t32.78204081632653\n12203\t32.92872281790748\n12204\t28.568670279672517\n12205\t27.329531687850288\n12210\t29.25241866412403\n12303\t26.406165494862087\n12305\t28.229554309040093\n12345\t28.420951658042274\n12414\t30.912783165855537\n12428\t27.731451041603176\n12455\t30.087209302325583\n12463\t21.804714324293045\n12464\t21.363261500950195\n12472\t28.02122448979592\n12501\t26.04066201149647\n12534\t28.545706371191137\n12550\t31.47510747731996\n12589\t17.305957432590464\n12594\t20.345175107079868\n12601\t26.994460433442022\n12603\t29.005528773653865\n12733\t21.76931292274831\n12740\t34.97231833910035\n12812\t30.433893515764424\n12814\t33.05084745762712\n12827\t21.667962412114655\n12834\t35.82391634339686\n12839\t25.710005089046696\n12845\t29.358367346938774\n12853\t33.44945905255418\n12866\t28.902185223725287\n12883\t38.063280785246874\n12887\t35.68188416315866\n12901\t28.36971995776983\n12937\t27.07323407202216\n12953\t29.298609106697626\n12983\t29.431742586043907\n12986\t24.760841836734695\n13021\t33.241219568714556\n13027\t23.465397923875432\n13039\t21.380553902174295\n13045\t32.41886220783316\n13052\t25.802448979591837\n13064\t28.28272712706297\n13073\t23.251102585248663\n13080\t26.68460739452296\n13084\t26.945153061224488\n13088\t35.250789564538145\n13108\t27.606310013717422\n13116\t27.314129150810146\n13118\t36.04952802526459\n13148\t21.438367346938776\n13152\t22.796442299201995\n13157\t32.90277777777778\n13165\t26.920796405067712\n13202\t28.25356853401506\n13204\t26.47115674704913\n13205\t28.961555621653776\n13221\t29.318705305382082\n13224\t28.572194459680425\n13326\t37.32645069419722\n13327\t24.805555555555557\n13329\t26.68794148230485\n13332\t18.404223676383104\n13335\t26.964654343306886\n13338\t25.08573388203018\n13346\t32.07493056394155\n13367\t30.277423469387756\n13406\t34.06611570247934\n13438\t29.68391498611279\n13459\t22.68636379934741\n13476\t20.26605471691348\n13491\t33.59787552272519\n13492\t33.213122789818286\n13601\t23.810919367546255\n13605\t28.076066054149752\n13612\t30.6280276816609\n13619\t25.03902185223725\n13637\t30.6521114622235\n13661\t19.64922711058264\n13662\t22.83944642619201\n13690\t27.01845630236781\n13745\t27.967618026355062\n13753\t22.056993402775593\n13775\t19.850935172193974\n13780\t26.29310344827586\n13803\t25.055555555555557\n13804\t24.63038691412394\n13808\t31.194526627218934\n13815\t31.775897491349482\n13820\t23.964497041420117\n13865\t25.30881930479747\n13901\t27.960170178236456\n13904\t29.189702192773453\n14011\t25.143634051138108\n14020\t21.027292060491494\n14024\t32.724431927780564\n14031\t31.05240161043663\n14036\t27.680560417905973\n14052\t33.743334112348094\n14058\t39.72068978820261\n14068\t25.94086217899219\n14094\t28.46895896185186\n14098\t34.50595924644367\n14127\t18.87045092634558\n14141\t26.406035665294926\n14167\t18.484897959183673\n14204\t26.30251512601863\n14211\t20.774904575543076\n14214\t27.71779883373191\n14220\t26.680242572428337\n14221\t28.37498574522427\n14222\t25.768184915479505\n14224\t31.532921810699587\n14227\t27.173666613548928\n14304\t21.472318339100347\n14416\t21.463815789473685\n14418\t27.640066534139315\n14427\t26.753264941703723\n14445\t23.998042359843826\n14450\t26.872241288799486\n14454\t35.51695585080357\n14467\t25.31614593426852\n14472\t34.61394380853278\n14481\t28.267195944937143\n14502\t25.3683559197258\n14512\t30.17810999879007\n14513\t25.917638295600153\n14517\t28.768624607161073\n14527\t21.94413568073434\n14551\t29.85171696149844\n14561\t26.688581314878892\n14572\t30.261021832002154\n14609\t38.16872427983539\n14611\t26.245306931311642\n14616\tnull\n14620\t29.63208771566458\n14623\t24.73786820421698\n14624\t18.707133058984912\n14626\t30.75977275601342\n14701\t28.436392562838666\n14727\t19.954313356624564\n14732\t28.443877551020407\n14736\t32.200692041522494\n14750\t30.8063611600705\n14755\t32.37806799481811\n14757\t25.97956112536376\n14760\t31.343527059125048\n14775\t27.77359583539298\n14785\t24.89142857142857\n14804\t25.81295350712174\n14810\t34.933035714285715\n14818\t19.84653447595826\n14823\t27.46337259408216\n14826\t25.679347826086957\n14843\t22.555475796635562\n14850\t28.1834663843002\n14859\t17.922416385445555\n14867\t23.094243174165282\n14869\t25.691135734072024\n14897\t17.750865051903116\n15003\t21.741293404362263\n15012\t23.207075962539022\n15017\t28.955837676669034\n15021\t36.71135919555386\n15037\t29.30135086004759\n15090\t27.77478053584811\n15104\t28.95421436004162\n15106\t26.955282852037726\n15116\t32.12991536775293\n15132\t25.85224520394488\n15139\t21.39290435587283\n15143\t26.748065428795567\n15144\t23.970170454545453\n15145\t27.018116853492984\n15202\t26.368343195266274\n15205\t30.033829691863023\n15206\t27.078534669859245\n15209\t27.351983473967998\n15210\t28.13467751403237\n15212\t28.288042776800904\n15219\t28.26193807153744\n15222\t28.05028057069257\n15226\t24.38234572449244\n15235\t29.732510288065843\n15236\t30.783961185553395\n15317\t28.2469058478754\n15333\t32.16401236552857\n15358\t38.33374181576276\n15362\t27.023699599876885\n15401\t37.8840830449827\n15425\t28.09699250163108\n15431\t28.64032414213489\n15480\t38.19700368530684\n15501\t28.3869319967529\n15533\t29.428035492738022\n15537\t25.40336944892883\n15552\t27.867198807069865\n15601\t28.908822313334934\n15626\t35.46597633136095\n15642\t34.84903469298882\n15672\t19.716668623188028\n15683\t25.029311676055936\n15690\t35.127195247933884\n15716\t21.724965706447186\n15728\t35.322818114123635\n15832\t38.31336173257024\n15903\t32.6072890552781\n15904\t25.169516538219863\n15905\t31.426530612244896\n15936\t26.53739377952203\n15946\t31.887388681413388\n15963\t22.17183169564122\n16036\t30.181790808837366\n16038\t26.658090814928663\n16052\t23.29947676208064\n16125\t32.399477427783424\n16142\t19.930795847750865\n16145\t23.294005102040817\n16146\t22.924000482121404\n16150\t27.713091808998335\n16151\t21.091086983966672\n16201\t37.16625133499466\n16222\t25.472411186696903\n16226\t29.244144266456193\n16323\t25.295888655422846\n16351\t27.77854671280277\n16353\t28.27783558792924\n16364\t26.515851031086488\n16365\t28.394652879490913\n16371\t34.33294886582084\n16403\t36.09396433470508\n16406\t32.64685627718079\n16412\t22.68140243066157\n16417\t20.59722222222222\n16426\t20.579268292682926\n16441\t35.239669421487605\n16443\t21.75899728383884\n16501\t27.589070079629792\n16505\t33.00435948530236\n16602\t28.56145259841939\n16611\t27.78609604720879\n16617\t26.450892857142858\n16630\t32.2384066587396\n16648\t32.95577882687788\n16651\t18.415178571428573\n16652\t26.435149498965476\n16701\t26.272694909220363\n16731\t28.29510591672754\n16749\t25.029744199881023\n16801\t27.86516409085422\n16823\t30.934552125162238\n16836\t31.745856538802148\n16854\t34.01920438957476\n16870\t24.102717808886638\n16881\t22.079071650035864\n16923\t36.33401920438958\n17003\t26.651091253083564\n17006\t38.3203125\n17019\t27.603779246720496\n17022\t25.02883506343714\n17028\t34.80225627203153\n17038\t20.008650519031143\n17044\t23.73113854595336\n17045\t27.10546875\n17051\t34.03346386614454\n17057\t21.100027137175296\n17064\t31.87097588688297\n17067\t21.44768133174792\n17086\t25.106641728261522\n17101\t27.21682366085431\n17111\t28.455365974162184\n17112\t31.525866104446283\n17201\t29.750513218196776\n17220\t31.853133410226835\n17241\t21.33984375\n17257\t26.687257335025325\n17264\t24.840561224489797\n17327\t28.49385749298071\n17339\t20.778123309897243\n17345\t29.845303517644822\n17350\t34.09315971609783\n17401\t27.278248439197927\n17402\t30.772849588503362\n17522\t23.998925020155873\n17527\t36.3448428228759\n17545\t23.93867470982807\n17566\t22.130493856332702\n17670\t29.01895281978576\n17737\t29.167672986354304\n17754\t39.676041295834814\n17764\t33.297326492033484\n17771\t39.76171875\n17815\t28.312692418147286\n17870\t29.257015306122447\n17872\t34.52381488189326\n17948\t21.253035961453083\n17980\t29.747036125642204\n18014\t23.123966942148762\n18018\t27.523602424474568\n18042\t29.481154169569038\n18064\t32.892816232681895\n18067\t28.607775381534978\n18071\t29.65247103440747\n18077\t19.301720235400634\n18101\t29.991835431643395\n18106\t31.50543196631812\n18201\t22.45315288518739\n18324\t31.47717666948436\n18326\t34.92579492397101\n18337\t24.027423469387756\n18353\t33.52627376977791\n18407\t28.06463830324454\n18414\t22.588969823100935\n18427\t29.18640898173865\n18431\t21.976406468500127\n18436\t25.686570924666164\n18445\t21.165069754377203\n18503\t28.8232225933438\n18603\t31.482555477549525\n18612\t27.472911359663694\n18657\t24.56639327756405\n18706\t28.78671865172102\n18801\t30.4878892733564\n18812\t38.48291441069956\n18833\t28.279037689155746\n18834\t27.20242214532872\n18837\t29.241036860236825\n18853\t18.99524375743163\n18861\t33.789378599119274\n18949\t25.980873671264476\n18964\t27.246797075880917\n18966\t23.327384951840614\n18976\t26.436968336483933\n19002\t27.61206650435407\n19003\tnull\n19017\t37.48760330578512\n19020\t27.57088338553414\n19036\t23.474767476328328\n19044\t29.46762422098169\n19046\t29.758121931448514\n19047\t27.940533053445012\n19050\t26.895244753951687\n19063\t37.162259588404424\n19087\t29.50041108459475\n19088\t26.563696075184865\n19103\t27.581605075985678\n19106\t30.162523699660742\n19118\t36.12590898698498\n19121\t25.45626315660188\n19123\t28.42951645687162\n19124\t29.381059236036492\n19125\t25.50177095631641\n19126\t29.349201267222355\n19131\t30.39463305898491\n19139\t33.1111698295787\n19143\t23.363980530016224\n19144\t27.771006388092424\n19145\t32.94098313146431\n19146\t27.566254051646002\n19153\t25.909046469354188\n19320\t26.993425858290724\n19341\t27.116586769046734\n19344\t24.40751000307787\n19348\t26.59036860879905\n19365\t32.458358120166565\n19390\t22.305555555555557\n19403\t27.479499267017204\n19406\t28.567047637251587\n19454\t30.28925674866255\n19472\t30.323745385208326\n19501\t19.583102493074794\n19549\t33.77950474244528\n19711\t27.41886396067841\n19802\t19.26378772112383\n19809\t24.408982771802176\n19934\t35.745148721114155\n19950\t31.860574829438235\n19971\t20.889698231009366\n19975\t19.6875\n20004\t26.355866899664342\n20005\t27.94029847461312\n20008\t28.885577714873815\n20009\t28.963177603428747\n20011\t26.099217957668284\n20016\t27.414939668512037\n20017\t27.043904008821887\n20021\t18.69797859690844\n20032\t27.689301487631827\n20147\t23.67498411858416\n20151\t26.368050229819612\n20170\t26.347092869669012\n20191\t30.00408876567491\n20301\t29.17147931091297\n20510\t24.83335955457433\n20601\t24.22718506650157\n20613\t30.354806911566328\n20650\t23.03717352988303\n20653\t24.95888092132364\n20662\t31.755153864145143\n20670\t20.627011001872827\n20676\t28.362639208175867\n20678\t18.94249192141611\n20680\t28.27281605401614\n20701\t30.267676329706614\n20705\t28.370246220285726\n20707\t27.36940814291765\n20735\t27.4436045605739\n20741\t29.005706496869173\n20746\t32.01601646108329\n20763\t30.126723621127432\n20767\t26.0198937781366\n20772\t24.87519895334318\n20815\t25.552539956003518\n20817\t31.854598478444633\n20837\t34.93263431680967\n20870\t21.285076530612244\n20872\t30.20020008622214\n20892\t31.138553951768863\n20904\t27.795238036821114\n20906\t28.622999822342333\n20910\t29.754083106030937\n21014\t29.97947586750148\n21040\t26.532207171299643\n21042\t30.88480299853898\n21044\t30.64067871258008\n21045\t29.495581921394034\n21051\t28.386553352016154\n21061\t27.23551340631414\n21076\t27.418034533615142\n21084\t19.49875945179584\n21108\t30.657563413432598\n21111\t32.673660273053756\n21113\t28.261428122857364\n21117\t25.08826314544257\n21136\t21.922075641620367\n21146\t25.909023309299656\n21157\t25.60715196339016\n21162\t24.074275739883475\n21201\t28.517015830167416\n21207\t24.21240224767809\n21208\t28.88999827024306\n21215\t28.918575958861883\n21228\t24.928977272727273\n21231\t26.57814758867487\n21234\t24.184071099967255\n21244\t26.611597263963176\n21522\t23.32706261757592\n21545\t29.466372845252423\n21550\t34.33294886582084\n21555\t30.125253796219507\n21601\t28.354094060542344\n21635\t22.5\n21651\t28.763971071663377\n21655\t29.32006920415225\n21663\t24.778285407148616\n21668\t26.09045575053655\n21673\t21.390778533635675\n21679\t24.853801169590643\n21701\t24.433195790920298\n21702\t27.051014485780748\n21717\t19.39242674858223\n21719\t18.33904901878447\n21740\t27.13127537560289\n21742\t29.745807528361656\n21750\t33.010275132673414\n21754\t26.937798026824552\n21770\t22.56264959787318\n21771\t29.570161163127686\n21791\t29.080932784636488\n21804\t29.0005035159566\n21811\t20.863683662851198\n21824\t29.28892733564014\n21838\t31.154136789184925\n21842\t28.78971030830229\n21869\t19.698707885521074\n21874\t18.76594387755102\n21875\t28.137300779414534\n21901\t25.712988944616107\n21915\t21.219240129799893\n21921\t26.353037805912738\n22011\t28.836208518369347\n22020\t27.022922428943687\n22021\t27.797181713353076\n22041\t32.71453287197232\n22042\t32.38482093064579\n22069\t26.04870813689226\n22079\t30.430383288418287\n22080\t28.167453121542763\n22102\t26.783101911153814\n22134\t29.30581091292698\n22161\t28.24451706946606\n22181\t25.98304248691896\n22186\t25.335632604449092\n22193\t33.94086442074334\n22204\t34.95448704981301\n22205\t26.07295079697485\n22310\t26.75730987568614\n22312\t27.37740903079042\n22370\t32.00328889536707\n22401\t26.85209063461392\n22407\t29.44322113872287\n22408\t25.700871989034752\n22443\t41.77045721935981\n22448\t30.509833143686848\n22553\t29.483507900917616\n22554\t22.40277777777778\n22601\t27.58995563552397\n22602\t23.49182058876901\n22701\t28.013311539430035\n22801\t27.864227925421787\n22802\t24.06348143072258\n22824\t25.468577366334195\n22843\t30.639792899408285\n22851\t32.04605718415374\n22958\t32.030178326474626\n22964\t18.415637860082306\n22980\t27.974547254581637\n23002\t19.735939643347052\n23040\t23.261834319526628\n23055\t32.78145695364238\n23069\t24.359723320420734\n23103\t22.08635520323832\n23113\t28.428203026621745\n23139\t17.567662196701797\n23149\t21.098615916955016\n23168\t20.848715972250396\n23219\t27.452006973224446\n23222\t27.987237447620025\n23224\t26.814940678126007\n23227\t24.843469496276484\n23231\t27.210485539156785\n23233\t26.770205756475118\n23323\t29.960472133556035\n23417\t28.27783558792924\n23421\t28.48079561042524\n23432\t27.481487956322226\n23451\t29.772802969474434\n23452\t26.402124464136044\n23456\t25.618396466449575\n23462\t27.92513458420272\n23464\t29.4372571254375\n23502\t28.22423862119368\n23503\t18.982937028784225\n23510\t25.82623829665443\n"},{"type":"HTML","data":"<div class=\"result-alert alert-warning\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button><strong>Output is truncated</strong> to 1000 rows. Learn more about <strong>common.max_count</strong></div>"}]},"apps":[],"jobName":"paragraph_1567666453215_1207082994","id":"20160925-071150_859801425","dateCreated":"2019-09-05T06:54:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:13224"},{"title":"Top 5 Report - States by BMI (US Only)","text":"%jdbc(hive)\nselect * from\n(select state, avg((weight*4500/(height*height))) as bmi\nfrom worldwidebank.us_customers\ngroup by state) s \norder by bmi desc\nlimit 5","user":"joe_analyst","dateUpdated":"2020-01-08T03:11:34+0000","config":{"editorSetting":{"editOnDblClick":false,"language":"sql","completionSupport":true},"colWidth":6,"editorMode":"ace/mode/sql","editorHide":false,"fontSize":9,"title":true,"results":[{"graph":{"mode":"pieChart","height":277,"optionOpen":false,"keys":[{"name":"s.state","index":0,"aggr":"sum"}],"values":[{"name":"s.bmi","index":1,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"s.state","index":0,"aggr":"sum"},"yAxis":{"name":"s.bmi","index":1,"aggr":"sum"}},"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"s.state":"string","s.bmi":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}},"helium":{}}],"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"s.state\ts.bmi\nSD\t28.486996100969215\nRI\t28.439102071775036\nIA\t28.36243225893233\nMP\t28.35098277547388\nAK\t28.33652811183552\n"}]},"apps":[],"jobName":"paragraph_1567666453215_-784512923","id":"20160925-071159_1808389414","dateCreated":"2019-09-05T06:54:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:13225"},{"title":"Dynamic Column Masking: MRN/password cols masked via classification policy. Others masked via Hive col policy. Custom masks for Birthday/Age.","text":"%jdbc(hive)\nSELECT surname, streetaddress, country, age, password, nationalid, ccnumber, mrn, birthday FROM worldwidebank.us_customers LIMIT 50","user":"joe_analyst","dateUpdated":"2020-01-08T03:11:37+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/sql","colWidth":12,"editorHide":false,"fontSize":9,"title":true,"results":[{"graph":{"mode":"table","height":324.006,"optionOpen":false,"keys":[{"name":"surname","index":0,"aggr":"sum"}],"values":[{"name":"streetaddress","index":1,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"surname","index":0,"aggr":"sum"},"yAxis":{"name":"streetaddress","index":1,"aggr":"sum"}},"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"surname":"string","streetaddress":"string","country":"string","age":"string","password":"string","nationalid":"string","ccnumber":"string","mrn":"string","birthday":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"surname\tstreetaddress\tcountry\tage\tpassword\tnationalid\tccnumber\tmrn\tbirthday\nPowers\tnnnn Xxxxxxxx Xxxxx\tUS\t58\t76a3fe33eb676cb12b99f00400772e7f5e5abc00950f432a7428d8e3567e26cf\txxx-xx-3016\t5.49xxxx+xx\tnull\t01-01-1973\nWhitman\tnnnn Xxxxxxx Xxxxx\tUS\t58\t6103bc600fc877e5cdf250521e422fc738544bff75165f335e5d2437e6793f4f\txxx-xx-8255\t4.55xxxx+xx\tnull\t01-01-1977\nMarone\tnnn Xxxxx Xxxxx\tUS\t59\tda01407d5922624b1dd67c22e849cb9ee0ba0fbf3b25ab6e3f78ed234a86b817\txxx-xx-6142\t4.53xxxx+xx\tnull\t01-01-1977\nHarp\tnnnn Xxx Xxxx Xxxx\tUS\t24\t717051c13b6bda179f3f1fca42d415524c7e373dcfefc265c0973badf28b1600\txxx-xx-4018\t5.20xxxx+xx\tnull\t01-01-1997\nPereira\tnnnn Xxxxxxxx Xxxxxx\tUS\t85\t47d2ebe1a1c1146698e22d126282356ac2ccbe0ca60a9d4d6d4f757cde627e30\txxx-xx-1927\t5.38xxxx+xx\tnull\t01-01-2038\nBlackburn\tnnn Xxxxxxx Xxxx\tUS\t54\t127473e0e3d200b19f7f9fe20facdc159eccdb67433b8ec271a62cca4445a7d7\txxx-xx-7903\t5.53xxxx+xx\tnull\t01-01-1965\nGonzalez\tnnnn Xxxxx Xxxx\tUS\t33\t4082d6873762eaf3b566cae982b973ff064248b4d1eaf554aa1651ae49895bc3\txxx-xx-2582\t4.71xxxx+xx\tnull\t01-01-1995\nHelton\tnnnn Xxxxxxx Xxxxx\tUS\t51\t5a5e10b606eb7599b8175a13289663cda1bbfb17edf44e97a3044b5f89038c03\txxx-xx-4291\t5.25xxxx+xx\tnull\t01-01-1975\nMei\tnnn Xxxxx Xxxxxx\tUS\t84\t79027eba8d2ae53c943d26c0ba801ae021aec73e46d9463ab5b6700d22d59b60\txxx-xx-8366\t5.20xxxx+xx\tnull\t01-01-2041\nGoldberg\tnnnn Xxxxx Xxxxx\tUS\t75\t478f719c117d97df442ec619f535f7a7e1454c58315f70b4402d618dbc146ac6\txxx-xx-4937\t4.55xxxx+xx\tnull\t01-01-1944\nWinkler\tnnnn Xxxxx Xxxx\tUS\t58\t5dfa9db09186e767a2e6c63bfbb3136e14e59212357e98c634156e46c4f5c6de\txxx-xx-3193\t5.43xxxx+xx\tnull\t01-01-1976\nThompson\tnnnn Xxxxx Xxxx Xxxxx\tUS\t64\t2fcbf7698869f199622f80c0440c94e770b1b846f9c95431af6ea1ed9b9a91e5\txxx-xx-5747\t4.55xxxx+xx\tnull\t01-01-1956\nAnderson\tnnnn Xxxxxxxxx Xxxxx\tUS\t56\t1956925afde71a890a4df019b980e975f6a8e417342967d2225c98277dac62a2\txxx-xx-0336\t5.58xxxx+xx\tnull\t01-01-1974\nMejia\tnnnn Xxx Xxxx\tUS\t65\t6f90e556636a22a8a484ff498004af2d7a2aa69e9d661b6b59f4359973ab93b3\txxx-xx-0064\t5.35xxxx+xx\tnull\t01-01-1961\nNoland\tnnnn Xxxxxx Xxxxxx\tUS\t30\tcfa7cce9b7b32a45de22e76ae382918925dc50a55bf79a211b9845c13c5c9113\txxx-xx-3798\t4.48xxx+xx\tnull\t01-01-1988\nHaynes\tnnnn Xxxxxxxxxx Xxxxx Xxxxxx\tUS\t27\t65a99668f810afc6698d35ba4c531e8591bd3ba6bc0099ed664bc9106aeb535d\txxx-xx-8147\t4.91xxx+xx\tnull\t01-01-1996\nDion\tnnnn Xxxxxx Xxxx\tUS\t54\t26400bfde5875f9ced4c84284d92601f24739c57cc834356967505c625b0a76f\txxx-xx-2587\t5.53xxxx+xx\tnull\t01-01-1971\nButler\tnnnn Xxxxx Xxxxxx\tUS\t54\t8f8e13932e829d86aec0051912a3035e802abfc3b4c41db0b771f590b944f726\txxx-xx-6719\t4.48xxxx+xx\tnull\t01-01-1977\nBigelow\tnnnn Xxxx Xxxxxx Xxxx\tUS\t63\tfea59a46dbe83781e313ecb837bd33858d81a33f55b4c87f9a7bb41c90de9a2d\txxx-xx-9172\t4.53xxxx+xx\tnull\t01-01-1970\nWalsh\tnnnn Xxxxx Xxxxx Xxxxx\tUS\t63\t96736a02052ee964a0238386f9a514fb69e8a7edd1705f0e2aab49f271a31033\txxx-xx-3610\t4.55xxx+xx\tnull\t01-01-1965\nSheets\tnnnn Xxxxxx Xxxxxx\tUS\t30\t31e7d947d7ff06228e379d0d0021aecf81881ad377ffdde7f5d73acd2962ef9d\txxx-xx-5026\t4.91xxxx+xx\tnull\t01-01-1997\nParks\tnnnn Xxxxx Xxxxxx\tUS\t88\t2795821286f1854f8e2c24a81c578c800419992474000a92030f092d2b33be23\txxx-xx-2077\t4.53xxxx+xx\tnull\t01-01-2040\nHelm\tnnnn Xxxxxxxx Xxx\tUS\t56\te528e36f31dc340769b73f6379646c5d76200651c59162cc1e537b516e5d63fc\txxx-xx-1168\t5.22xxxx+xx\tnull\t01-01-1966\nBrinegar\tnnnn Xxxxxxxxx Xxxxx\tUS\t22\te31baf36ea4d91b973a863593574e4e0a7a7adadb889e63edd2ac61727f3d4d4\txxx-xx-7445\t4.53xxxx+xx\tnull\t01-01-1994\nMcKinney\tnnnn Xxxxxxxxx Xxxxx\tUS\t79\tf4dfed8c41f5640f9ec0264e2dd46c826f03303382235d08014ee53a6d89c2b5\txxx-xx-9133\t5.59xxxx+xx\tnull\t01-01-1955\nBoehm\tnnnn Xxxxxx Xxxxxxx\tUS\t19\t3c2fd553dec4fa710e1b445a220dc76b47dcc18f77cf9a599dcabc2207d40cb4\txxx-xx-4169\t4.53xxxx+xx\tnull\t01-01-1997\nBaker\tnnnn Xxxxxxx Xxxxxx\tUS\t91\t762f655168838ae69adf4b471a1823b100c11e082061e2db2d3c8bf53dce4aa1\txxx-xx-1699\t5.57xxxx+xx\tnull\t01-01-1941\nSmith\tnnnn Xxxxxxxxxx Xxxx\tUS\t36\t2ead0d5117881b5094eab4e5ca286de9639d759e04ce8f5be872776df068c277\txxx-xx-3370\t5.11xxxx+xx\tnull\t01-01-1993\nDunton\tnnnn Xxxxxxxx Xxxxxx\tUS\t38\tb22d91263d20b0bf3b3ebc8babd541a210f528edf42eb99f326e3b38872b8bec\txxx-xx-9390\t4.53xxxx+xx\tnull\t01-01-1985\nWiley\tnnnn Xxxxxx Xxxxxx\tUS\t53\t1a0c997b2d497b6554f8c81ad58dde74f50f74c98f4a5201ef6f3a385fbb8a80\txxx-xx-3457\t5.41xxxx+xx\tnull\t01-01-1984\nWeatherholt\tnnnn Xxxxxxx Xxxxx\tUS\t22\ta7b6e81cea36db77f93deff33c614028fc63fa9b04fd9b21082644e6324edbfe\txxx-xx-1830\t4.48xxxx+xx\tnull\t01-01-1997\nJohnson\tnnnn Xxxx Xxx Xxxxx\tUS\t50\t22e86de151c60a38296d868e00a6fb9e298eabca8494357d9d3b06da7abcbc32\txxx-xx-5368\t5.18xxxx+xx\tnull\t01-01-1979\nKilgore\tnnnn Xxxxxxxxx Xxxxxx\tUS\t86\t36ccbc0e704f7c1253a914ed8baf6b6b7526ea0dfc18199a62e3d02c27448361\txxx-xx-6347\t4.48xxxx+xx\tnull\t01-01-2032\nMorgan\tnnnn Xxxxxxx Xxxx\tUS\t70\tc33cacde1277ab8851d23057b89ba3c46ffcad46a65323915004e6b1369191b0\txxx-xx-9265\t5.39xxxx+xx\tnull\t01-01-1958\nSmith\tnnn Xxxxxx Xxxxxx\tUS\t76\t5557e6078cc3d690d71da518d77f09519ed36b819fefbc1a9d9421f04df6d08a\txxx-xx-0793\t4.53xxxx+xx\tnull\t01-01-1945\nHarrison\tnnn Xxx Xxx\tUS\t63\tf75ca5486af8585a131fccf1a90ac6c52bb14e54576ba263698d0a1e79deae0e\txxx-xx-9518\t5.51xxxx+xx\tnull\t01-01-1968\nHall\tnnn Xxxxxx Xxxxxx\tUS\t32\t7020d631706397319c6f3412a3ed9df80a4b38bb2fe80a0dbde61b370d669040\txxx-xx-7908\t4.48xxxx+xx\tnull\t01-01-1989\nMunz\tnnnn Xxxxxxx Xxxxxx\tUS\t64\tbd0285f48c03e1f0c447e7a36963da1c7e228eaf4effa3159ffb0c6d934daecc\txxx-xx-4274\t5.33xxxx+xx\tnull\t01-01-1971\nMcNulty\tnnnn Xxxxxxxx Xxxx\tUS\t40\t724f1774f69978929883d1874e9712f2f5d9410c3cb5fd8ce735b5b5c8f772b6\txxx-xx-9733\t5.40xxxx+xx\tnull\t01-01-1989\nGriffith\tnnnn Xxxxxxxx Xxxxxx\tUS\t52\t08e9f45f7a8afd938fe7596e923f692a86d5feaccd21291d1114cd229ab20fbf\txxx-xx-4328\t5.47xxxx+xx\tnull\t01-01-1974\nHarris\tnnnn Xxxxxxx Xxxxxx\tUS\t77\t6fb058ffb311eb52392e15cb564fabee0dd80036f18ed225e2d250d447598ea2\txxx-xx-2228\t4.48xxxx+xx\tnull\t01-01-2039\nBaker\tnnn Xxxxxxxx Xxxxxx\tUS\t83\t5254702a4c903ab3aede64ab561cf4393590e12aab93e936b7016be8ed45cddd\txxx-xx-3961\t5.36xxxx+xx\tnull\t01-01-1955\nClark\tnnnn Xxxxx Xxx Xxxxx\tUS\t51\t6c008fcfff0dd7adb2af605c3f6ab1dc6034a4522551c958d59bffba34ba4acb\txxx-xx-8413\t5.23xxxx+xx\tnull\t01-01-1974\nHammonds\tnnnn Xxxxxx Xxxxxx\tUS\t75\tfd46c5b0d92d686b54cbbce3384e44bf410906992ce124c6467be96153be278e\txxx-xx-1898\t4.53xxxx+xx\tnull\t01-01-1943\nCruz\tnnn Xxxxxx Xxxx\tUS\t66\te3a032e9a9259c276e0cb824cc96c85959b0f81416fbf0606bd7947e0eccddab\txxx-xx-3563\t4.55xxx+xx\tnull\t01-01-1967\nLawrence\tnnnn Xxxxxxxxxxx Xxxx\tUS\t66\t40edbb47e0b77f48aa4fe1a909388667b5a724e14535ee7263ae350a5c30492a\txxx-xx-9699\t4.91xxxx+xx\tnull\t01-01-1959\nMarroquin\tnnnn Xxxxxxx Xxxxx\tUS\t53\t35beafe31e669c04fd284cc08f20de3309e470861f48dce214a49c0ec8af4135\txxx-xx-8286\t4.53xxxx+xx\tnull\t01-01-1972\nEide\tnnnn Xxxxxx Xxxxxx\tUS\t50\t428281e106e0d916ccdfa74e128373f4e1430d5069d643fe46812fd91bf67b8d\txxx-xx-6762\t4.71xxxx+xx\tnull\t01-01-1980\nMiller\tnnnn Xxxxxxx Xxxx\tUS\t31\t5f714bb3f7bf825e28e665d26a4713a0a39de7ff3e3807ed8e437cb8eb17da17\txxx-xx-2609\t4.71xxxx+xx\tnull\t01-01-1996\nFontenot\tnnnn Xxxxxxx Xxxxx\tUS\t72\tde18c44ed5da5fdf86c15202f9080c0162f1f04fb2928afc0f0cc00aa15ae869\txxx-xx-5867\t5.59xxxx+xx\tnull\t01-01-1949\n"}]},"apps":[],"jobName":"paragraph_1567666453215_-297508276","id":"20160923-075335_1656987170","dateCreated":"2019-09-05T06:54:13+0000","dateStarted":"2020-01-08T03:11:38+0000","dateFinished":"2020-01-08T03:11:41+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13226"},{"text":"%md\n### Prohibition policy to prevent toxic joins\nBelow policy prevents the combination of zipcode, bloodtype, insuranceid columns on ww_customers table\n![](https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/cdp/screenshot-prohibition-policy.png)","user":"joe_analyst","dateUpdated":"2020-01-08T23:00:21+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h3>Prohibition policy to prevent toxic joins</h3>\n<p>Below policy prevents the combination of zipcode, bloodtype, insuranceid columns on ww_customers table<br />\n<img src=\"https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/cdp/screenshot-prohibition-policy.png\" alt=\"\" /></p>\n\n</div>"}]},"apps":[],"jobName":"paragraph_1567666453216_1696431955","id":"20180416-134701_1900274445","dateCreated":"2019-09-05T06:54:13+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13227","dateFinished":"2020-01-08T23:00:21+0000","dateStarted":"2020-01-08T23:00:21+0000"},{"title":"Prohibition policy: Prevent toxic joins (prevent join of Zipcode, Insuranceid, Blood group)","text":"%jdbc(hive)\nselect zipcode, insuranceid, bloodtype from worldwidebank.ww_customers\nlimit 10","user":"joe_analyst","dateUpdated":"2020-01-08T03:12:05+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/sql","colWidth":12,"editorHide":false,"fontSize":9,"title":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[{"name":"ww_customers.gender","index":0,"aggr":"sum"}],"values":[{"name":"ww_customers.title","index":1,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"ww_customers.gender","index":0,"aggr":"sum"},"yAxis":{"name":"ww_customers.title","index":1,"aggr":"sum"}},"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"zipcode":"string","insuranceid":"string","bloodtype":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [worldwidebank/ww_customers/*]\n\tat org.apache.hive.jdbc.Utils.verifySuccess(Utils.java:301)\n\tat org.apache.hive.jdbc.Utils.verifySuccessWithInfo(Utils.java:287)\n\tat org.apache.hive.jdbc.HiveStatement.runAsyncOnServer(HiveStatement.java:324)\n\tat org.apache.hive.jdbc.HiveStatement.execute(HiveStatement.java:265)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.executeSql(JDBCInterpreter.java:718)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.interpret(JDBCInterpreter.java:801)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:103)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer$InterpretJob.jobRun(RemoteInterpreterServer.java:633)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:188)\n\tat org.apache.zeppelin.scheduler.ParallelScheduler$JobRunner.run(ParallelScheduler.java:162)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [worldwidebank/ww_customers/*]\n\tat org.apache.hive.service.cli.operation.Operation.toSQLException(Operation.java:352)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:202)\n\tat org.apache.hive.service.cli.operation.SQLOperation.runInternal(SQLOperation.java:265)\n\tat org.apache.hive.service.cli.operation.Operation.run(Operation.java:264)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementInternal(HiveSessionImpl.java:565)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementAsync(HiveSessionImpl.java:551)\n\tat org.apache.hive.service.cli.CLIService.executeStatementAsync(CLIService.java:315)\n\tat org.apache.hive.service.cli.thrift.ThriftCLIService.ExecuteStatement(ThriftCLIService.java:567)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1557)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1542)\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)\n\tat org.apache.hadoop.hive.metastore.security.HadoopThriftAuthBridge$Server$TUGIAssumingProcessor.process(HadoopThriftAuthBridge.java:654)\n\tat org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286)\n\t... 3 more\nCaused by: java.lang.RuntimeException: org.apache.hadoop.hive.ql.security.authorization.plugin.HiveAccessControlException:Permission denied: user [joe_analyst] does not have [SELECT] privilege on [worldwidebank/ww_customers/*]\n\tat org.apache.ranger.authorization.hive.authorizer.RangerHiveAuthorizer.checkPrivileges(RangerHiveAuthorizer.java:837)\n\tat org.apache.hadoop.hive.ql.security.authorization.command.CommandAuthorizerV2.doAuthorization(CommandAuthorizerV2.java:77)\n\tat org.apache.hadoop.hive.ql.security.authorization.command.CommandAuthorizer.doAuthorization(CommandAuthorizer.java:58)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:690)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1504)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1451)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1446)\n\tat org.apache.hadoop.hive.ql.reexec.ReExecDriver.compileAndRespond(ReExecDriver.java:126)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:200)\n\t... 15 more\n"}]},"apps":[],"jobName":"paragraph_1567666453216_-2036143745","id":"20160923-075040_806201705","dateCreated":"2019-09-05T06:54:13+0000","dateStarted":"2020-01-08T03:12:05+0000","dateFinished":"2020-01-08T03:12:05+0000","status":"ERROR","progressUpdateIntervalMs":500,"$$hashKey":"object:13228"},{"title":"Prohibition policy - dropping insuranceid allows query to run","text":"%jdbc(hive)\nselect zipcode, bloodtype from worldwidebank.ww_customers\nlimit 10","user":"joe_analyst","dateUpdated":"2020-01-08T03:11:55+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"zipcode":"string","bloodtype":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"zipcode\tbloodtype\n65806\tAB-\n99503\tO+\n19403\tO+\n10007\tB+\n19034\tA+\n76550\tB+\n7102\tO+\n43613\tO+\n15238\tA+\n38635\tB+\n"}]},"apps":[],"jobName":"paragraph_1567666453216_403629065","id":"20171014-031612_1756057609","dateCreated":"2019-09-05T06:54:13+0000","dateStarted":"2020-01-08T03:11:55+0000","dateFinished":"2020-01-08T03:11:55+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13229"},{"text":"%md\n### Leased Data Asset: Lifecycle controlled by Classification based policy \nColumns tagged with EXPIRED_ON are restricted\n![](https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/cdp/screenshot-expiredon-policy.png)","user":"joe_analyst","dateUpdated":"2020-01-08T23:00:34+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h3>Leased Data Asset: Lifecycle controlled by Classification based policy</h3>\n<p>Columns tagged with EXPIRED_ON are restricted<br />\n<img src=\"https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/cdp/screenshot-expiredon-policy.png\" alt=\"\" /></p>\n\n</div>"}]},"apps":[],"jobName":"paragraph_1567666453216_559096048","id":"20180416-135459_1798195441","dateCreated":"2019-09-05T06:54:13+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13230","dateFinished":"2020-01-08T23:00:34+0000","dateStarted":"2020-01-08T23:00:34+0000"},{"title":"Leased Data Asset: Lifecycle controlled by Classification based policy (fed_tax is tagged with EXPIRED_ON which is restricted to analysts)","text":"%jdbc(hive)\nselect fed_tax from finance.tax_2015","user":"joe_analyst","dateUpdated":"2020-01-08T03:12:10+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[{"name":"tax_2015.ssn","index":0,"aggr":"sum"}],"values":[{"name":"tax_2015.fed_tax","index":1,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"tax_2015.ssn","index":0,"aggr":"sum"},"yAxis":{"name":"tax_2015.fed_tax","index":1,"aggr":"sum"}},"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"fed_tax":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [finance/tax_2015/*]\n\tat org.apache.hive.jdbc.Utils.verifySuccess(Utils.java:301)\n\tat org.apache.hive.jdbc.Utils.verifySuccessWithInfo(Utils.java:287)\n\tat org.apache.hive.jdbc.HiveStatement.runAsyncOnServer(HiveStatement.java:324)\n\tat org.apache.hive.jdbc.HiveStatement.execute(HiveStatement.java:265)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.executeSql(JDBCInterpreter.java:718)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.interpret(JDBCInterpreter.java:801)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:103)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer$InterpretJob.jobRun(RemoteInterpreterServer.java:633)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:188)\n\tat org.apache.zeppelin.scheduler.ParallelScheduler$JobRunner.run(ParallelScheduler.java:162)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [finance/tax_2015/*]\n\tat org.apache.hive.service.cli.operation.Operation.toSQLException(Operation.java:352)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:202)\n\tat org.apache.hive.service.cli.operation.SQLOperation.runInternal(SQLOperation.java:265)\n\tat org.apache.hive.service.cli.operation.Operation.run(Operation.java:264)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementInternal(HiveSessionImpl.java:565)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementAsync(HiveSessionImpl.java:551)\n\tat org.apache.hive.service.cli.CLIService.executeStatementAsync(CLIService.java:315)\n\tat org.apache.hive.service.cli.thrift.ThriftCLIService.ExecuteStatement(ThriftCLIService.java:567)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1557)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1542)\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)\n\tat org.apache.hadoop.hive.metastore.security.HadoopThriftAuthBridge$Server$TUGIAssumingProcessor.process(HadoopThriftAuthBridge.java:654)\n\tat org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286)\n\t... 3 more\nCaused by: java.lang.RuntimeException: org.apache.hadoop.hive.ql.security.authorization.plugin.HiveAccessControlException:Permission denied: user [joe_analyst] does not have [SELECT] privilege on [finance/tax_2015/*]\n\tat org.apache.ranger.authorization.hive.authorizer.RangerHiveAuthorizer.checkPrivileges(RangerHiveAuthorizer.java:837)\n\tat org.apache.hadoop.hive.ql.security.authorization.command.CommandAuthorizerV2.doAuthorization(CommandAuthorizerV2.java:77)\n\tat org.apache.hadoop.hive.ql.security.authorization.command.CommandAuthorizer.doAuthorization(CommandAuthorizer.java:58)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:690)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1504)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1451)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1446)\n\tat org.apache.hadoop.hive.ql.reexec.ReExecDriver.compileAndRespond(ReExecDriver.java:126)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:200)\n\t... 15 more\n"}]},"apps":[],"jobName":"paragraph_1567666453216_-309494094","id":"20160925-071354_682186859","dateCreated":"2019-09-05T06:54:13+0000","dateStarted":"2020-01-08T03:12:10+0000","dateFinished":"2020-01-08T03:12:11+0000","status":"ERROR","progressUpdateIntervalMs":500,"$$hashKey":"object:13231"},{"text":"%md\n### Analyst prohibited from accessing personal data through Data Classification based policy\nColums tagged with PII cannot by accessed by analysts\n![](https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/cdp/screenshot-PII-policy.png)","user":"joe_analyst","dateUpdated":"2020-01-08T23:00:47+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h3>Analyst prohibited from accessing personal data through Data Classification based policy</h3>\n<p>Colums tagged with PII cannot by accessed by analysts<br />\n<img src=\"https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/cdp/screenshot-PII-policy.png\" alt=\"\" /></p>\n\n</div>"}]},"apps":[],"jobName":"paragraph_1567666453217_-625820864","id":"20180416-135929_1690789582","dateCreated":"2019-09-05T06:54:13+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13232","dateFinished":"2020-01-08T23:00:47+0000","dateStarted":"2020-01-08T23:00:47+0000"},{"title":"Analyst prohibited from accessing personal data through Data Classification based policy (SSN column is tagged with PII which analysts cannot access)","text":"%jdbc(hive)\nselect ssn from finance.tax_2015","user":"joe_analyst","dateUpdated":"2020-01-08T03:12:16+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [finance/tax_2015/*]\n\tat org.apache.hive.jdbc.Utils.verifySuccess(Utils.java:301)\n\tat org.apache.hive.jdbc.Utils.verifySuccessWithInfo(Utils.java:287)\n\tat org.apache.hive.jdbc.HiveStatement.runAsyncOnServer(HiveStatement.java:324)\n\tat org.apache.hive.jdbc.HiveStatement.execute(HiveStatement.java:265)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.executeSql(JDBCInterpreter.java:718)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.interpret(JDBCInterpreter.java:801)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:103)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer$InterpretJob.jobRun(RemoteInterpreterServer.java:633)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:188)\n\tat org.apache.zeppelin.scheduler.ParallelScheduler$JobRunner.run(ParallelScheduler.java:162)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [finance/tax_2015/*]\n\tat org.apache.hive.service.cli.operation.Operation.toSQLException(Operation.java:352)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:202)\n\tat org.apache.hive.service.cli.operation.SQLOperation.runInternal(SQLOperation.java:265)\n\tat org.apache.hive.service.cli.operation.Operation.run(Operation.java:264)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementInternal(HiveSessionImpl.java:565)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementAsync(HiveSessionImpl.java:551)\n\tat org.apache.hive.service.cli.CLIService.executeStatementAsync(CLIService.java:315)\n\tat org.apache.hive.service.cli.thrift.ThriftCLIService.ExecuteStatement(ThriftCLIService.java:567)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1557)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1542)\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)\n\tat org.apache.hadoop.hive.metastore.security.HadoopThriftAuthBridge$Server$TUGIAssumingProcessor.process(HadoopThriftAuthBridge.java:654)\n\tat org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286)\n\t... 3 more\nCaused by: java.lang.RuntimeException: org.apache.hadoop.hive.ql.security.authorization.plugin.HiveAccessControlException:Permission denied: user [joe_analyst] does not have [SELECT] privilege on [finance/tax_2015/*]\n\tat org.apache.ranger.authorization.hive.authorizer.RangerHiveAuthorizer.checkPrivileges(RangerHiveAuthorizer.java:837)\n\tat org.apache.hadoop.hive.ql.security.authorization.command.CommandAuthorizerV2.doAuthorization(CommandAuthorizerV2.java:77)\n\tat org.apache.hadoop.hive.ql.security.authorization.command.CommandAuthorizer.doAuthorization(CommandAuthorizer.java:58)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:690)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1504)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1451)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1446)\n\tat org.apache.hadoop.hive.ql.reexec.ReExecDriver.compileAndRespond(ReExecDriver.java:126)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:200)\n\t... 15 more\n"}]},"apps":[],"jobName":"paragraph_1567666453217_1619750561","id":"20171130-014507_1288287350","dateCreated":"2019-09-05T06:54:13+0000","dateStarted":"2020-01-08T03:12:16+0000","dateFinished":"2020-01-08T03:12:16+0000","status":"ERROR","progressUpdateIntervalMs":500,"$$hashKey":"object:13233"},{"title":"Querying for columns other than fed_tax/ssn works","text":"%jdbc(hive)\nselect state_tax from finance.tax_2015","user":"joe_analyst","dateUpdated":"2020-01-08T03:12:22+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/sql","colWidth":12,"fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"state_tax":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"state_tax\n5750\n8765\n10123\n"}]},"apps":[],"jobName":"paragraph_1567666453217_-1696295751","id":"20160923-080610_1981371448","dateCreated":"2019-09-05T06:54:13+0000","dateStarted":"2020-01-08T03:12:22+0000","dateFinished":"2020-01-08T03:12:22+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13234"},{"title":"Data Quality annotation based policy: Don't waste time on poor quality datasets! (Analysts should not access table tagged with DATA_QUALITY score < 60%)","text":"%jdbc(hive)\nselect * from cost_savings.claim_savings limit 5","user":"joe_analyst","dateUpdated":"2020-01-08T03:12:27+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [cost_savings/claim_savings/*]\n\tat org.apache.hive.jdbc.Utils.verifySuccess(Utils.java:301)\n\tat org.apache.hive.jdbc.Utils.verifySuccessWithInfo(Utils.java:287)\n\tat org.apache.hive.jdbc.HiveStatement.runAsyncOnServer(HiveStatement.java:324)\n\tat org.apache.hive.jdbc.HiveStatement.execute(HiveStatement.java:265)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.executeSql(JDBCInterpreter.java:718)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.interpret(JDBCInterpreter.java:801)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:103)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer$InterpretJob.jobRun(RemoteInterpreterServer.java:633)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:188)\n\tat org.apache.zeppelin.scheduler.ParallelScheduler$JobRunner.run(ParallelScheduler.java:162)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [cost_savings/claim_savings/*]\n\tat org.apache.hive.service.cli.operation.Operation.toSQLException(Operation.java:352)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:202)\n\tat org.apache.hive.service.cli.operation.SQLOperation.runInternal(SQLOperation.java:265)\n\tat org.apache.hive.service.cli.operation.Operation.run(Operation.java:264)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementInternal(HiveSessionImpl.java:565)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementAsync(HiveSessionImpl.java:551)\n\tat org.apache.hive.service.cli.CLIService.executeStatementAsync(CLIService.java:315)\n\tat org.apache.hive.service.cli.thrift.ThriftCLIService.ExecuteStatement(ThriftCLIService.java:567)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1557)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1542)\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)\n\tat org.apache.hadoop.hive.metastore.security.HadoopThriftAuthBridge$Server$TUGIAssumingProcessor.process(HadoopThriftAuthBridge.java:654)\n\tat org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286)\n\t... 3 more\nCaused by: java.lang.RuntimeException: org.apache.hadoop.hive.ql.security.authorization.plugin.HiveAccessControlException:Permission denied: user [joe_analyst] does not have [SELECT] privilege on [cost_savings/claim_savings/*]\n\tat org.apache.ranger.authorization.hive.authorizer.RangerHiveAuthorizer.checkPrivileges(RangerHiveAuthorizer.java:837)\n\tat org.apache.hadoop.hive.ql.security.authorization.command.CommandAuthorizerV2.doAuthorization(CommandAuthorizerV2.java:77)\n\tat org.apache.hadoop.hive.ql.security.authorization.command.CommandAuthorizer.doAuthorization(CommandAuthorizer.java:58)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:690)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1504)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1451)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1446)\n\tat org.apache.hadoop.hive.ql.reexec.ReExecDriver.compileAndRespond(ReExecDriver.java:126)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:200)\n\t... 15 more\n"}]},"apps":[],"jobName":"paragraph_1567666453217_1177472473","id":"20171014-025518_429189642","dateCreated":"2019-09-05T06:54:13+0000","dateStarted":"2020-01-08T03:12:27+0000","dateFinished":"2020-01-08T03:12:27+0000","status":"ERROR","progressUpdateIntervalMs":500,"$$hashKey":"object:13235"},{"text":"%md\n### What about tag based policies on other components?\n\n#### Dynmaic tag based prohibition policies on Hbase, Kafka, HDFS","user":"joe_analyst","dateUpdated":"2019-09-05T06:54:13+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>What about tag based policies on other components?</h3>\n<h4>Dynmaic tag based prohibition policies on Hbase, Kafka, HDFS</h4>\n"}]},"apps":[],"jobName":"paragraph_1567666453217_-1381066728","id":"20180416-121650_1644147608","dateCreated":"2019-09-05T06:54:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:13236"},{"title":"HBase table tagged with SENSITIVE tag cannot be accessed by analysts ","text":"%sh\n\nkinit -kt /etc/security/keytabs/joe_analyst.keytab joe_analyst/$(hostname -f)@CLOUDERA.COM;\necho \"***Attempting to access t_forex as Joe***...\"\necho \"scan 't_forex'\" | hbase shell\n\necho \"****Attempting to access t_private as Joe***...\"\necho \"scan 't_private'\" | hbase shell\n","user":"joe_analyst","dateUpdated":"2020-01-08T03:14:06+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":4,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"***Attempting to access t_forex as Joe***...\nHBase Shell\nUse \"help\" to get list of supported commands.\nUse \"exit\" to quit this interactive shell.\nFor Reference, please visit: http://hbase.apache.org/2.0/book.html#shell\nVersion 2.2.0.7.0.3.0-79, rUnknown, Tue Nov 19 07:51:36 UTC 2019\nTook 0.0008 seconds\nstty: standard input: Inappropriate ioctl for device\nscan 't_forex'\nROW  COLUMN+CELL\n0 row(s)\nTook 0.4362 seconds\n\n****Attempting to access t_private as Joe***...\nHBase Shell\nUse \"help\" to get list of supported commands.\nUse \"exit\" to quit this interactive shell.\nFor Reference, please visit: http://hbase.apache.org/2.0/book.html#shell\nVersion 2.2.0.7.0.3.0-79, rUnknown, Tue Nov 19 07:51:36 UTC 2019\nTook 0.0007 seconds\nstty: standard input: Inappropriate ioctl for device\nscan 't_private'\nROW  COLUMN+CELL\norg.apache.hadoop.hbase.security.AccessDeniedException: org.apache.hadoop.hbase.security.AccessDeniedException: Insufficient permissions for user ‘joe_analyst/cdp.cloudera.com@CLOUDERA.COM',action: scannerOpen, tableName:t_private, family:cf1.\n\tat org.apache.ranger.authorization.hbase.RangerAuthorizationCoprocessor.authorizeAccess(RangerAuthorizationCoprocessor.java:542)\n\tat org.apache.ranger.authorization.hbase.RangerAuthorizationCoprocessor.preScannerOpen(RangerAuthorizationCoprocessor.java:984)\n\tat org.apache.ranger.authorization.hbase.RangerAuthorizationCoprocessor.preScannerOpen(RangerAuthorizationCoprocessor.java:711)\n\tat org.apache.hadoop.hbase.regionserver.RegionCoprocessorHost$43.call(RegionCoprocessorHost.java:1361)\n\tat org.apache.hadoop.hbase.regionserver.RegionCoprocessorHost$43.call(RegionCoprocessorHost.java:1358)\n\tat org.apache.hadoop.hbase.coprocessor.CoprocessorHost$ObserverOperationWithoutResult.callObserver(CoprocessorHost.java:551)\n\tat org.apache.hadoop.hbase.coprocessor.CoprocessorHost.execOperation(CoprocessorHost.java:625)\n\tat org.apache.hadoop.hbase.regionserver.RegionCoprocessorHost.preScannerOpen(RegionCoprocessorHost.java:1358)\n\tat org.apache.hadoop.hbase.regionserver.RSRpcServices.newRegionScanner(RSRpcServices.java:3036)\n\tat org.apache.hadoop.hbase.regionserver.RSRpcServices.scan(RSRpcServices.java:3351)\n\tat org.apache.hadoop.hbase.shaded.protobuf.generated.ClientProtos$ClientService$2.callBlockingMethod(ClientProtos.java:42190)\n\tat org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:413)\n\tat org.apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:133)\n\tat org.apache.hadoop.hbase.ipc.RpcExecutor$Handler.run(RpcExecutor.java:338)\n\tat org.apache.hadoop.hbase.ipc.RpcExecutor$Handler.run(RpcExecutor.java:318)\n\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n\tat org.apache.hadoop.hbase.ipc.RemoteWithExtrasException.instantiateException(RemoteWithExtrasException.java:99)\n\tat org.apache.hadoop.hbase.ipc.RemoteWithExtrasException.unwrapRemoteException(RemoteWithExtrasException.java:89)\n\tat org.apache.hadoop.hbase.shaded.protobuf.ProtobufUtil.makeIOExceptionOfException(ProtobufUtil.java:364)\n\tat org.apache.hadoop.hbase.shaded.protobuf.ProtobufUtil.handleRemoteException(ProtobufUtil.java:352)\n\tat org.apache.hadoop.hbase.client.ScannerCallable.openScanner(ScannerCallable.java:344)\n\tat org.apache.hadoop.hbase.client.ScannerCallable.rpcCall(ScannerCallable.java:242)\n\tat org.apache.hadoop.hbase.client.ScannerCallable.rpcCall(ScannerCallable.java:58)\n\tat org.apache.hadoop.hbase.client.RegionServerCallable.call(RegionServerCallable.java:127)\n\tat org.apache.hadoop.hbase.client.RpcRetryingCallerImpl.callWithoutRetries(RpcRetryingCallerImpl.java:192)\n\tat org.apache.hadoop.hbase.client.ScannerCallableWithReplicas$RetryingRPC.call(ScannerCallableWithReplicas.java:387)\n\tat org.apache.hadoop.hbase.client.ScannerCallableWithReplicas$RetryingRPC.call(ScannerCallableWithReplicas.java:361)\n\tat org.apache.hadoop.hbase.client.RpcRetryingCallerImpl.callWithRetries(RpcRetryingCallerImpl.java:107)\n\tat org.apache.hadoop.hbase.client.ResultBoundedCompletionService$QueueingFuture.run(ResultBoundedCompletionService.java:80)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.hadoop.hbase.ipc.RemoteWithExtrasException(org.apache.hadoop.hbase.security.AccessDeniedException): org.apache.hadoop.hbase.security.AccessDeniedException: Insufficient permissions for user ‘joe_analyst/cdp.cloudera.com@CLOUDERA.COM',action: scannerOpen, tableName:t_private, family:cf1.\n\tat org.apache.ranger.authorization.hbase.RangerAuthorizationCoprocessor.authorizeAccess(RangerAuthorizationCoprocessor.java:542)\n\tat org.apache.ranger.authorization.hbase.RangerAuthorizationCoprocessor.preScannerOpen(RangerAuthorizationCoprocessor.java:984)\n\tat org.apache.ranger.authorization.hbase.RangerAuthorizationCoprocessor.preScannerOpen(RangerAuthorizationCoprocessor.java:711)\n\tat org.apache.hadoop.hbase.regionserver.RegionCoprocessorHost$43.call(RegionCoprocessorHost.java:1361)\n\tat org.apache.hadoop.hbase.regionserver.RegionCoprocessorHost$43.call(RegionCoprocessorHost.java:1358)\n\tat org.apache.hadoop.hbase.coprocessor.CoprocessorHost$ObserverOperationWithoutResult.callObserver(CoprocessorHost.java:551)\n\tat org.apache.hadoop.hbase.coprocessor.CoprocessorHost.execOperation(CoprocessorHost.java:625)\n\tat org.apache.hadoop.hbase.regionserver.RegionCoprocessorHost.preScannerOpen(RegionCoprocessorHost.java:1358)\n\tat org.apache.hadoop.hbase.regionserver.RSRpcServices.newRegionScanner(RSRpcServices.java:3036)\n\tat org.apache.hadoop.hbase.regionserver.RSRpcServices.scan(RSRpcServices.java:3351)\n\tat org.apache.hadoop.hbase.shaded.protobuf.generated.ClientProtos$ClientService$2.callBlockingMethod(ClientProtos.java:42190)\n\tat org.apache.hadoop.hbase.ipc.RpcServer.call(RpcServer.java:413)\n\tat org.apache.hadoop.hbase.ipc.CallRunner.run(CallRunner.java:133)\n\tat org.apache.hadoop.hbase.ipc.RpcExecutor$Handler.run(RpcExecutor.java:338)\n\tat org.apache.hadoop.hbase.ipc.RpcExecutor$Handler.run(RpcExecutor.java:318)\n\n\tat org.apache.hadoop.hbase.ipc.AbstractRpcClient.onCallFinished(AbstractRpcClient.java:389)\n\tat org.apache.hadoop.hbase.ipc.AbstractRpcClient.access$100(AbstractRpcClient.java:97)\n\tat org.apache.hadoop.hbase.ipc.AbstractRpcClient$3.run(AbstractRpcClient.java:423)\n\tat org.apache.hadoop.hbase.ipc.AbstractRpcClient$3.run(AbstractRpcClient.java:419)\n\tat org.apache.hadoop.hbase.ipc.Call.callComplete(Call.java:103)\n\tat org.apache.hadoop.hbase.ipc.Call.setException(Call.java:118)\n\tat org.apache.hadoop.hbase.ipc.NettyRpcDuplexHandler.readResponse(NettyRpcDuplexHandler.java:162)\n\tat org.apache.hadoop.hbase.ipc.NettyRpcDuplexHandler.channelRead(NettyRpcDuplexHandler.java:192)\n\tat org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:359)\n\tat org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:345)\n\tat org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:337)\n\tat org.apache.hbase.thirdparty.io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:323)\n\tat org.apache.hbase.thirdparty.io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:297)\n\tat org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:359)\n\tat org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:345)\n\tat org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:337)\n\tat org.apache.hbase.thirdparty.io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)\n\tat org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:359)\n\tat org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:345)\n\tat org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:337)\n\tat org.apache.hbase.thirdparty.io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1408)\n\tat org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:359)\n\tat org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:345)\n\tat org.apache.hbase.thirdparty.io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:930)\n\tat org.apache.hbase.thirdparty.io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163)\n\tat org.apache.hbase.thirdparty.io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:677)\n\tat org.apache.hbase.thirdparty.io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:612)\n\tat org.apache.hbase.thirdparty.io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:529)\n\tat org.apache.hbase.thirdparty.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:491)\n\tat org.apache.hbase.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:905)\n\tat org.apache.hbase.thirdparty.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n\t... 1 more\n\nERROR: org.apache.hadoop.hbase.security.AccessDeniedException: Insufficient permissions for user ‘joe_analyst/cdp.cloudera.com@CLOUDERA.COM',action: scannerOpen, tableName:t_private, family:cf1.\n\nFor usage try 'help \"scan\"'\n\nTook 1.5142 seconds\n\n"}]},"apps":[],"jobName":"paragraph_1567666453218_-882419762","id":"20171130-023001_1880969110","dateCreated":"2019-09-05T06:54:13+0000","dateStarted":"2020-01-08T03:14:06+0000","dateFinished":"2020-01-08T03:14:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13237"},{"title":"Kafka topics tagged with SENSITIVE tag cannot be accessed by analysts ","text":"%sh\nexport KAFKA_OPTS=\"-Djava.security.auth.login.config=/tmp/jaas.conf\"\n\nkinit -kt /etc/security/keytabs/joe_analyst.keytab joe_analyst/$(hostname -f)@CLOUDERA.COM\n \necho \"***Attempting to access FOREX topic as Joe***...\" \n/opt/cloudera/parcels/CDH/lib/kafka/bin/kafka-console-consumer.sh --consumer.config /tmp/client.properties  --bootstrap-server $(hostname -f):9092 --topic FOREX --from-beginning --max-messages 5\n\necho \"***Attempting to access PRIVATE topic as Joe***...\" \n/opt/cloudera/parcels/CDH/lib/kafka/bin/kafka-console-consumer.sh --consumer.config /tmp/client.properties  --bootstrap-server $(hostname -f):9092 --topic PRIVATE --from-beginning --max-messages 5\n\n","user":"joe_analyst","dateUpdated":"2020-01-08T03:15:04+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":4,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"***Attempting to access FOREX topic as Joe***...\n20/01/08 03:15:05 INFO utils.Log4jControllerRegistration$: Registered kafka:type=kafka.Log4jController MBean\n20/01/08 03:15:05 INFO consumer.ConsumerConfig: ConsumerConfig values: \n\tallow.auto.create.topics = true\n\tauto.commit.interval.ms = 5000\n\tauto.offset.reset = earliest\n\tbootstrap.servers = [cdp.cloudera.com:9092]\n\tcheck.crcs = true\n\tclient.dns.lookup = default\n\tclient.id = \n\tclient.rack = \n\tconnections.max.idle.ms = 540000\n\tdefault.api.timeout.ms = 60000\n\tenable.auto.commit = false\n\texclude.internal.topics = true\n\tfetch.max.bytes = 52428800\n\tfetch.max.wait.ms = 500\n\tfetch.min.bytes = 1\n\tgroup.id = console-consumer-19089\n\tgroup.instance.id = null\n\theartbeat.interval.ms = 3000\n\tinterceptor.classes = []\n\tinternal.leave.group.on.close = true\n\tisolation.level = read_uncommitted\n\tkey.deserializer = class org.apache.kafka.common.serialization.ByteArrayDeserializer\n\tmax.partition.fetch.bytes = 1048576\n\tmax.poll.interval.ms = 300000\n\tmax.poll.records = 500\n\tmetadata.max.age.ms = 300000\n\tmetric.reporters = []\n\tmetrics.num.samples = 2\n\tmetrics.recording.level = INFO\n\tmetrics.sample.window.ms = 30000\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor]\n\treceive.buffer.bytes = 65536\n\treconnect.backoff.max.ms = 1000\n\treconnect.backoff.ms = 50\n\trequest.timeout.ms = 30000\n\tretry.backoff.ms = 100\n\tsasl.client.callback.handler.class = null\n\tsasl.jaas.config = null\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\n\tsasl.kerberos.min.time.before.relogin = 60000\n\tsasl.kerberos.service.name = kafka\n\tsasl.kerberos.ticket.renew.jitter = 0.05\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\n\tsasl.login.callback.handler.class = null\n\tsasl.login.class = null\n\tsasl.login.refresh.buffer.seconds = 300\n\tsasl.login.refresh.min.period.seconds = 60\n\tsasl.login.refresh.window.factor = 0.8\n\tsasl.login.refresh.window.jitter = 0.05\n\tsasl.mechanism = GSSAPI\n\tsecurity.protocol = SASL_PLAINTEXT\n\tsend.buffer.bytes = 131072\n\tsession.timeout.ms = 10000\n\tssl.cipher.suites = null\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.1, TLSv1]\n\tssl.endpoint.identification.algorithm = https\n\tssl.key.password = null\n\tssl.keymanager.algorithm = SunX509\n\tssl.keystore.location = null\n\tssl.keystore.password = null\n\tssl.keystore.type = JKS\n\tssl.protocol = TLS\n\tssl.provider = null\n\tssl.secure.random.implementation = null\n\tssl.trustmanager.algorithm = PKIX\n\tssl.truststore.location = null\n\tssl.truststore.password = null\n\tssl.truststore.type = JKS\n\tvalue.deserializer = class org.apache.kafka.common.serialization.ByteArrayDeserializer\n\n20/01/08 03:15:05 INFO authenticator.AbstractLogin: Successfully logged in.\n20/01/08 03:15:05 INFO kerberos.KerberosLogin: [Principal=null]: TGT refresh thread started.\n20/01/08 03:15:05 INFO kerberos.KerberosLogin: [Principal=null]: TGT valid starting at: Wed Jan 08 03:15:04 UTC 2020\n20/01/08 03:15:05 INFO kerberos.KerberosLogin: [Principal=null]: TGT expires: Thu Jan 09 03:15:04 UTC 2020\n20/01/08 03:15:05 INFO kerberos.KerberosLogin: [Principal=null]: TGT refresh sleeping until: Wed Jan 08 22:43:39 UTC 2020\n20/01/08 03:15:05 INFO utils.AppInfoParser: Kafka version: 2.3.0.7.0.3.0-79\n20/01/08 03:15:05 INFO utils.AppInfoParser: Kafka commitId: 7df36e7ddd0676a5\n20/01/08 03:15:05 INFO utils.AppInfoParser: Kafka startTimeMs: 1578453305540\n20/01/08 03:15:05 INFO consumer.KafkaConsumer: [Consumer clientId=consumer-1, groupId=console-consumer-19089] Subscribed to topic(s): FOREX\n20/01/08 03:15:05 INFO clients.Metadata: [Consumer clientId=consumer-1, groupId=console-consumer-19089] Cluster ID: a6P40mMqRoST-w9R0Tvneg\n20/01/08 03:15:05 INFO internals.AbstractCoordinator: [Consumer clientId=consumer-1, groupId=console-consumer-19089] Discovered group coordinator cdp.cloudera.com:9092 (id: 2147483639 rack: null)\n20/01/08 03:15:05 INFO internals.ConsumerCoordinator: [Consumer clientId=consumer-1, groupId=console-consumer-19089] Revoking previously assigned partitions []\n20/01/08 03:15:05 INFO internals.AbstractCoordinator: [Consumer clientId=consumer-1, groupId=console-consumer-19089] (Re-)joining group\n20/01/08 03:15:05 INFO internals.AbstractCoordinator: [Consumer clientId=consumer-1, groupId=console-consumer-19089] (Re-)joining group\n20/01/08 03:15:08 INFO internals.AbstractCoordinator: [Consumer clientId=consumer-1, groupId=console-consumer-19089] Successfully joined group with generation 1\n20/01/08 03:15:08 INFO internals.ConsumerCoordinator: [Consumer clientId=consumer-1, groupId=console-consumer-19089] Setting newly assigned partitions: FOREX-0\n20/01/08 03:15:08 INFO internals.ConsumerCoordinator: [Consumer clientId=consumer-1, groupId=console-consumer-19089] Found no committed offset for partition FOREX-0\n20/01/08 03:15:08 INFO internals.SubscriptionState: [Consumer clientId=consumer-1, groupId=console-consumer-19089] Resetting offset for partition FOREX-0 to offset 0.\nUTC time,EUR/USD\n2018-03-26T09:00:00Z,1.231\n2018-03-26T10:00:00Z,1.232\n2018-03-26T11:00:00Z,1.233\n2018-03-26T12:00:00Z,1.231\n20/01/08 03:15:08 INFO consumer.KafkaConsumer: [Consumer clientId=consumer-1, groupId=console-consumer-19089] Seeking to offset 5 for partition FOREX-0\n20/01/08 03:15:08 INFO internals.AbstractCoordinator: [Consumer clientId=consumer-1, groupId=console-consumer-19089] Member consumer-1-99ee3912-358d-4e7e-8444-70cd48424b82 sending LeaveGroup request to coordinator cdp.cloudera.com:9092 (id: 2147483639 rack: null)\n20/01/08 03:15:08 WARN kerberos.KerberosLogin: [Principal=null]: TGT renewal thread has been interrupted and will exit.\nProcessed a total of 5 messages\n***Attempting to access PRIVATE topic as Joe***...\n20/01/08 03:15:09 INFO utils.Log4jControllerRegistration$: Registered kafka:type=kafka.Log4jController MBean\n20/01/08 03:15:10 INFO consumer.ConsumerConfig: ConsumerConfig values: \n\tallow.auto.create.topics = true\n\tauto.commit.interval.ms = 5000\n\tauto.offset.reset = earliest\n\tbootstrap.servers = [cdp.cloudera.com:9092]\n\tcheck.crcs = true\n\tclient.dns.lookup = default\n\tclient.id = \n\tclient.rack = \n\tconnections.max.idle.ms = 540000\n\tdefault.api.timeout.ms = 60000\n\tenable.auto.commit = false\n\texclude.internal.topics = true\n\tfetch.max.bytes = 52428800\n\tfetch.max.wait.ms = 500\n\tfetch.min.bytes = 1\n\tgroup.id = console-consumer-8496\n\tgroup.instance.id = null\n\theartbeat.interval.ms = 3000\n\tinterceptor.classes = []\n\tinternal.leave.group.on.close = true\n\tisolation.level = read_uncommitted\n\tkey.deserializer = class org.apache.kafka.common.serialization.ByteArrayDeserializer\n\tmax.partition.fetch.bytes = 1048576\n\tmax.poll.interval.ms = 300000\n\tmax.poll.records = 500\n\tmetadata.max.age.ms = 300000\n\tmetric.reporters = []\n\tmetrics.num.samples = 2\n\tmetrics.recording.level = INFO\n\tmetrics.sample.window.ms = 30000\n\tpartition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor]\n\treceive.buffer.bytes = 65536\n\treconnect.backoff.max.ms = 1000\n\treconnect.backoff.ms = 50\n\trequest.timeout.ms = 30000\n\tretry.backoff.ms = 100\n\tsasl.client.callback.handler.class = null\n\tsasl.jaas.config = null\n\tsasl.kerberos.kinit.cmd = /usr/bin/kinit\n\tsasl.kerberos.min.time.before.relogin = 60000\n\tsasl.kerberos.service.name = kafka\n\tsasl.kerberos.ticket.renew.jitter = 0.05\n\tsasl.kerberos.ticket.renew.window.factor = 0.8\n\tsasl.login.callback.handler.class = null\n\tsasl.login.class = null\n\tsasl.login.refresh.buffer.seconds = 300\n\tsasl.login.refresh.min.period.seconds = 60\n\tsasl.login.refresh.window.factor = 0.8\n\tsasl.login.refresh.window.jitter = 0.05\n\tsasl.mechanism = GSSAPI\n\tsecurity.protocol = SASL_PLAINTEXT\n\tsend.buffer.bytes = 131072\n\tsession.timeout.ms = 10000\n\tssl.cipher.suites = null\n\tssl.enabled.protocols = [TLSv1.2, TLSv1.1, TLSv1]\n\tssl.endpoint.identification.algorithm = https\n\tssl.key.password = null\n\tssl.keymanager.algorithm = SunX509\n\tssl.keystore.location = null\n\tssl.keystore.password = null\n\tssl.keystore.type = JKS\n\tssl.protocol = TLS\n\tssl.provider = null\n\tssl.secure.random.implementation = null\n\tssl.trustmanager.algorithm = PKIX\n\tssl.truststore.location = null\n\tssl.truststore.password = null\n\tssl.truststore.type = JKS\n\tvalue.deserializer = class org.apache.kafka.common.serialization.ByteArrayDeserializer\n\n20/01/08 03:15:10 INFO authenticator.AbstractLogin: Successfully logged in.\n20/01/08 03:15:10 INFO kerberos.KerberosLogin: [Principal=null]: TGT refresh thread started.\n20/01/08 03:15:10 INFO kerberos.KerberosLogin: [Principal=null]: TGT valid starting at: Wed Jan 08 03:15:04 UTC 2020\n20/01/08 03:15:10 INFO kerberos.KerberosLogin: [Principal=null]: TGT expires: Thu Jan 09 03:15:04 UTC 2020\n20/01/08 03:15:10 INFO kerberos.KerberosLogin: [Principal=null]: TGT refresh sleeping until: Wed Jan 08 23:20:07 UTC 2020\n20/01/08 03:15:10 INFO utils.AppInfoParser: Kafka version: 2.3.0.7.0.3.0-79\n20/01/08 03:15:10 INFO utils.AppInfoParser: Kafka commitId: 7df36e7ddd0676a5\n20/01/08 03:15:10 INFO utils.AppInfoParser: Kafka startTimeMs: 1578453310284\n20/01/08 03:15:10 INFO consumer.KafkaConsumer: [Consumer clientId=consumer-1, groupId=console-consumer-8496] Subscribed to topic(s): PRIVATE\n20/01/08 03:15:10 WARN clients.NetworkClient: [Consumer clientId=consumer-1, groupId=console-consumer-8496] Error while fetching metadata with correlation id 2 : {PRIVATE=TOPIC_AUTHORIZATION_FAILED}\n20/01/08 03:15:10 ERROR clients.Metadata: [Consumer clientId=consumer-1, groupId=console-consumer-8496] Topic authorization failed for topics [PRIVATE]\n20/01/08 03:15:10 INFO clients.Metadata: [Consumer clientId=consumer-1, groupId=console-consumer-8496] Cluster ID: a6P40mMqRoST-w9R0Tvneg\n20/01/08 03:15:10 ERROR tools.ConsoleConsumer$: Error processing message, terminating consumer process: \norg.apache.kafka.common.errors.TopicAuthorizationException: Not authorized to access topics: [PRIVATE]\n20/01/08 03:15:10 WARN kerberos.KerberosLogin: [Principal=null]: TGT renewal thread has been interrupted and will exit.\nProcessed a total of 0 messages\n"}]},"apps":[],"jobName":"paragraph_1567666453218_1977175415","id":"20180328-060527_475527693","dateCreated":"2019-09-05T06:54:13+0000","dateStarted":"2020-01-08T03:15:04+0000","dateFinished":"2020-01-08T03:15:10+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13238"},{"title":"HDFS dir/file tagged with SENSITIVE tag cannot be accessed by analysts ","text":"%sh\nkinit -kt /etc/security/keytabs/joe_analyst.keytab joe_analyst/$(hostname -f)@CLOUDERA.COM\nhdfs dfs -cat /sensitive/private.csv","user":"joe_analyst","dateUpdated":"2020-01-08T03:15:19+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":4,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"cat: Permission denied: user=joe_analyst, access=EXECUTE, inode=\"/sensitive/private.csv\"\n"},{"type":"TEXT","data":"ExitValue: 1"}]},"apps":[],"jobName":"paragraph_1567666453218_-1570872284","id":"20180620-011510_115380564","dateCreated":"2019-09-05T06:54:13+0000","dateStarted":"2020-01-08T03:15:19+0000","dateFinished":"2020-01-08T03:15:21+0000","status":"ERROR","progressUpdateIntervalMs":500,"$$hashKey":"object:13239"},{"title":"HDP 3.0 Decrypt UDF: US employee sees decrypted versions of email and phone number","text":"%jdbc(hive)\nselect * from  hr.employees_encrypted","user":"joe_analyst","dateUpdated":"2019-09-05T06:54:13+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"employees_encrypted.id":"string","employees_encrypted.name":"string","employees_encrypted.age":"string","employees_encrypted.phone":"string","employees_encrypted.email":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"employees_encrypted.id\temployees_encrypted.name\temployees_encrypted.age\temployees_encrypted.phone\temployees_encrypted.email\nnull\tName\tnull\tPhone\tEmail\n677509\tDonald Walker\t42\t303-572-8492\tlois.walker@hotmail.com\n940761\tRaymond Robinson\t41\t225-945-4954\tbrenda.robinson@gmail.com\n428945\tScott Robinson\t39\t219-904-2161\tjoe.robinson@gmail.com\n408351\tJason Evans\t20\t215-793-6791\tdiane.evans@yahoo.com\n193819\tGregory Russell\t78\t262-404-2252\tbenjamin.russell@charter.net\n499687\tRalph Bailey\t50\t319-812-6957\tpatrick.bailey@aol.com\n539712\tScott Baker\t22\t229-336-5117\tnancy.baker@bp.com\n380086\tEugene Murphy\t43\t216-336-0009\tcarol.murphy@gmail.com\n477616\tFred Young\t77\t210-819-9765\tfrances.young@gmail.com\n162402\tJonathan Peterson\t73\t479-783-5656\tdiana.peterson@hotmail.co.uk\n231469\tTerry Flores\t41\t316-280-2864\tralph.flores@yahoo.com\n153989\tSamuel Alexander\t60\t702-603-3769\tjack.alexander@gmail.com\n386158\tPhilip King\t42\t216-605-3731\tmelissa.king@comcast.net\n301576\tRonald Watson\t56\t701-231-9370\twayne.watson@gmail.com\n441771\tRichard Scott\t28\t215-288-9345\tcheryl.scott@gmail.com\n528509\tAlan Diaz\t20\t252-531-7641\tpaula.diaz@gmail.com\n912990\tTodd Stewart\t46\t217-279-9342\tjoshua.stewart@yahoo.ca\n214352\tJohn Lee\t40\t319-553-8919\ttheresa.lee@gmail.com\n890290\tLawrence Scott\t46\t423-939-1010\tjulia.scott@apple.com\n622406\tRyan Lewis\t52\t314-679-3697\tthomas.lewis@gmail.com\n979607\tShawn Edwards\t19\t225-283-4295\tcarol.edwards@msn.com\n969580\tJose Turner\t77\t236-972-7624\tmatthew.turner@gmail.com\n426038\tCharles Stewart\t49\t216-637-6800\tjoan.stewart@yahoo.com\n388642\tRonald Rogers\t22\t423-231-6507\truby.rogers@gmail.com\n560455\tJimmy Hayes\t61\t239-882-8784\tcarolyn.hayes@hotmail.co.uk\n477253\tJimmy Russell\t19\t605-635-1306\tanne.russell@ibm.com\n263480\tLouis Cooper\t76\t701-510-8162\tdaniel.cooper@yahoo.com\n683826\tAntonio Roberts\t23\t206-497-3141\troger.roberts@gmail.com\n474599\tRalph Walker\t31\t423-668-5506\tmaria.walker@microsoft.com\n335732\tPhillip Butler\t34\t480-814-8284\tbrenda.butler@gmail.com\n329752\tGary Brown\t19\t239-812-9041\tlillian.brown@aol.com\n893212\tJames Howard\t37\t803-613-3168\tamy.howard@aol.com\n621833\tJose Edwards\t84\t503-256-9654\tgregory.edwards@outlook.com\n456747\tBenjamin Griffin\t59\t219-506-9378\troy.griffin@yahoo.com\n278556\tPeter Mitchell\t71\t205-621-5884\trichard.mitchell@verizon.net\n333476\tRobert Wilson\t48\t423-937-8660\tmary.wilson@sbcglobal.net\n218791\tMichael Price\t27\t219-287-8926\taaron.price@bp.com\n134841\tAdam Brown\t46\t212-434-7910\tdonna.brown@aol.com\n726264\tGerald Collins\t27\t479-740-7633\tcarl.collins@yahoo.com\n766610\tEdward Jenkins\t43\t262-455-4187\tjoyce.jenkins@aol.com\n923947\tJoshua Bryant\t76\t319-827-3516\tmary.bryant@verizon.net\n227922\tRoy Hughes\t63\t225-544-9700\tamanda.hughes@rediffmail.com\n265813\tPhilip Campbell\t42\t316-499-5737\tjack.campbell@gmail.com\n247137\tBobby Rivera\t73\t423-277-6819\talan.rivera@apple.com\n407061\tScott Jackson\t49\t603-568-6118\telizabeth.jackson@aol.com\n226714\tBruce Davis\t57\t219-610-3067\tnancy.davis@ibm.com\n702813\tRyan Martinez\t44\t479-951-4138\ternest.martinez@gmail.com\n524896\tRalph Walker\t37\t316-736-6126\tjudy.hernandez@gmail.com\n363065\tPhillip Butler\t19\t212-825-1930\tnancy.jones@gmail.com\n227924\tGary Brown\t69\t307-329-8832\tpamela.wright@aol.com\n"}]},"apps":[],"jobName":"paragraph_1567666453218_1469728672","id":"20180720-081532_1607285102","dateCreated":"2019-09-05T06:54:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:13240"},{"title":"HDP 3.0 Information Schema: Analyst does not have any privileges on UK_EMPLOYEES table (etl_user does)","text":"%jdbc(hive)\nselect * from information_schema.table_privileges where table_name='uk_employees'","user":"joe_analyst","dateUpdated":"2019-09-05T06:54:13+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"table_privileges.grantor":"string","table_privileges.grantee":"string","table_privileges.table_catalog":"string","table_privileges.table_schema":"string","table_privileges.table_name":"string","table_privileges.privilege_type":"string","table_privileges.is_grantable":"string","table_privileges.with_hierarchy":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"table_privileges.grantor\ttable_privileges.grantee\ttable_privileges.table_catalog\ttable_privileges.table_schema\ttable_privileges.table_name\ttable_privileges.privilege_type\ttable_privileges.is_grantable\ttable_privileges.with_hierarchy\n"}]},"apps":[],"jobName":"paragraph_1567666453218_848060492","id":"20180719-222102_575617788","dateCreated":"2019-09-05T06:54:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:13241"},{"text":"%jdbc(hive)\nselect * from hr.uk_employees limit 5","user":"joe_analyst","dateUpdated":"2020-01-08T23:01:05+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [hr/uk_employees/*]\n\tat org.apache.hive.jdbc.Utils.verifySuccess(Utils.java:300)\n\tat org.apache.hive.jdbc.Utils.verifySuccessWithInfo(Utils.java:286)\n\tat org.apache.hive.jdbc.HiveStatement.runAsyncOnServer(HiveStatement.java:324)\n\tat org.apache.hive.jdbc.HiveStatement.execute(HiveStatement.java:265)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.executeSql(JDBCInterpreter.java:718)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.interpret(JDBCInterpreter.java:801)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:103)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer$InterpretJob.jobRun(RemoteInterpreterServer.java:633)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:188)\n\tat org.apache.zeppelin.scheduler.ParallelScheduler$JobRunner.run(ParallelScheduler.java:162)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [hr/uk_employees/*]\n\tat org.apache.hive.service.cli.operation.Operation.toSQLException(Operation.java:335)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:199)\n\tat org.apache.hive.service.cli.operation.SQLOperation.runInternal(SQLOperation.java:260)\n\tat org.apache.hive.service.cli.operation.Operation.run(Operation.java:247)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementInternal(HiveSessionImpl.java:541)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementAsync(HiveSessionImpl.java:527)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy.invoke(HiveSessionProxy.java:78)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy.access$000(HiveSessionProxy.java:36)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy$1.run(HiveSessionProxy.java:63)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:422)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1688)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy.invoke(HiveSessionProxy.java:59)\n\tat com.sun.proxy.$Proxy72.executeStatementAsync(Unknown Source)\n\tat org.apache.hive.service.cli.CLIService.executeStatementAsync(CLIService.java:312)\n\tat org.apache.hive.service.cli.thrift.ThriftCLIService.ExecuteStatement(ThriftCLIService.java:562)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1557)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1542)\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)\n\tat org.apache.hadoop.hive.metastore.security.HadoopThriftAuthBridge$Server$TUGIAssumingProcessor.process(HadoopThriftAuthBridge.java:647)\n\tat org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286)\n\t... 3 more\nCaused by: java.lang.RuntimeException: org.apache.hadoop.hive.ql.security.authorization.plugin.HiveAccessControlException:Permission denied: user [joe_analyst] does not have [SELECT] privilege on [hr/uk_employees/*]\n\tat org.apache.ranger.authorization.hive.authorizer.RangerHiveAuthorizer.checkPrivileges(RangerHiveAuthorizer.java:483)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorizationV2(Driver.java:1306)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorization(Driver.java:1070)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:697)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1830)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1777)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1772)\n\tat org.apache.hadoop.hive.ql.reexec.ReExecDriver.compileAndRespond(ReExecDriver.java:126)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:197)\n\t... 27 more\n"}]},"apps":[],"jobName":"paragraph_1567666453218_-469505183","id":"20180719-230647_1943203914","dateCreated":"2019-09-05T06:54:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:13242"},{"title":"HDP 3.0 Schedulable policy: validity period of Ranger policy determines whether table can be accessed","text":"\n%jdbc(hive)\nselect * from hr.uk_employees limit 5","user":"joe_analyst","dateUpdated":"2019-09-05T06:54:13+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [hr/uk_employees/*]\n\tat org.apache.hive.jdbc.Utils.verifySuccess(Utils.java:300)\n\tat org.apache.hive.jdbc.Utils.verifySuccessWithInfo(Utils.java:286)\n\tat org.apache.hive.jdbc.HiveStatement.runAsyncOnServer(HiveStatement.java:324)\n\tat org.apache.hive.jdbc.HiveStatement.execute(HiveStatement.java:265)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.commons.dbcp2.DelegatingStatement.execute(DelegatingStatement.java:291)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.executeSql(JDBCInterpreter.java:718)\n\tat org.apache.zeppelin.jdbc.JDBCInterpreter.interpret(JDBCInterpreter.java:801)\n\tat org.apache.zeppelin.interpreter.LazyOpenInterpreter.interpret(LazyOpenInterpreter.java:103)\n\tat org.apache.zeppelin.interpreter.remote.RemoteInterpreterServer$InterpretJob.jobRun(RemoteInterpreterServer.java:633)\n\tat org.apache.zeppelin.scheduler.Job.run(Job.java:188)\n\tat org.apache.zeppelin.scheduler.ParallelScheduler$JobRunner.run(ParallelScheduler.java:162)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: org.apache.hive.service.cli.HiveSQLException: Error while compiling statement: FAILED: HiveAccessControlException Permission denied: user [joe_analyst] does not have [SELECT] privilege on [hr/uk_employees/*]\n\tat org.apache.hive.service.cli.operation.Operation.toSQLException(Operation.java:335)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:199)\n\tat org.apache.hive.service.cli.operation.SQLOperation.runInternal(SQLOperation.java:260)\n\tat org.apache.hive.service.cli.operation.Operation.run(Operation.java:247)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementInternal(HiveSessionImpl.java:541)\n\tat org.apache.hive.service.cli.session.HiveSessionImpl.executeStatementAsync(HiveSessionImpl.java:527)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy.invoke(HiveSessionProxy.java:78)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy.access$000(HiveSessionProxy.java:36)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy$1.run(HiveSessionProxy.java:63)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.Subject.doAs(Subject.java:422)\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1688)\n\tat org.apache.hive.service.cli.session.HiveSessionProxy.invoke(HiveSessionProxy.java:59)\n\tat com.sun.proxy.$Proxy72.executeStatementAsync(Unknown Source)\n\tat org.apache.hive.service.cli.CLIService.executeStatementAsync(CLIService.java:312)\n\tat org.apache.hive.service.cli.thrift.ThriftCLIService.ExecuteStatement(ThriftCLIService.java:562)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1557)\n\tat org.apache.hive.service.rpc.thrift.TCLIService$Processor$ExecuteStatement.getResult(TCLIService.java:1542)\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)\n\tat org.apache.hadoop.hive.metastore.security.HadoopThriftAuthBridge$Server$TUGIAssumingProcessor.process(HadoopThriftAuthBridge.java:647)\n\tat org.apache.thrift.server.TThreadPoolServer$WorkerProcess.run(TThreadPoolServer.java:286)\n\t... 3 more\nCaused by: java.lang.RuntimeException: org.apache.hadoop.hive.ql.security.authorization.plugin.HiveAccessControlException:Permission denied: user [joe_analyst] does not have [SELECT] privilege on [hr/uk_employees/*]\n\tat org.apache.ranger.authorization.hive.authorizer.RangerHiveAuthorizer.checkPrivileges(RangerHiveAuthorizer.java:483)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorizationV2(Driver.java:1306)\n\tat org.apache.hadoop.hive.ql.Driver.doAuthorization(Driver.java:1070)\n\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:697)\n\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1830)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1777)\n\tat org.apache.hadoop.hive.ql.Driver.compileAndRespond(Driver.java:1772)\n\tat org.apache.hadoop.hive.ql.reexec.ReExecDriver.compileAndRespond(ReExecDriver.java:126)\n\tat org.apache.hive.service.cli.operation.SQLOperation.prepare(SQLOperation.java:197)\n\t... 27 more\n"}]},"apps":[],"jobName":"paragraph_1567666453219_-1933763898","id":"20180720-081842_831763351","dateCreated":"2019-09-05T06:54:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:13243"},{"text":"%md\n### Objective:Implement appropriate security controls to monitor access to data across the enterprise\n### Purpose: \n####  - Track user activity for personal/sensitive data to support both forensic auditing\n####  - Monitor and correlate data access via audits for breach forensics\n### Solution: \n####  - Ranger audits across Hadoop components (Hive, Hbase, Kafka etc) captured in Solr and HDFS\n\nLog into Ranger and navigate to Audit > Access. You will see a screen that looks like below:","user":"joe_analyst","dateUpdated":"2019-09-05T06:54:13+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Objective:Implement appropriate security controls to monitor access to data across the enterprise</h3>\n<h3>Purpose:</h3>\n<h4>- Track user activity for personal/sensitive data to support both forensic auditing</h4>\n<h4>- Monitor and correlate data access via audits for breach forensics</h4>\n<h3>Solution:</h3>\n<h4>- Ranger audits across Hadoop components (Hive, Hbase, Kafka etc) captured in Solr and HDFS</h4>\n<p>Log into Ranger and navigate to Audit > Access. You will see a screen that looks like below:</p>\n"}]},"apps":[],"jobName":"paragraph_1567666453219_-962711439","id":"20180416-130050_585569637","dateCreated":"2019-09-05T06:54:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:13244"},{"text":"%md\n![](https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/cdp/screenshot-joe-audits.png)","user":"joe_analyst","dateUpdated":"2020-01-08T23:01:32+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p><img src=\"https://github.com/abajwa-hw/masterclass/raw/master/ranger-atlas/media/cdp/screenshot-joe-audits.png\" alt=\"\" /></p>\n\n</div>"}]},"apps":[],"jobName":"paragraph_1567666453219_-1356718641","id":"20180405-064354_180188806","dateCreated":"2019-09-05T06:54:13+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13245","dateFinished":"2020-01-08T23:01:32+0000","dateStarted":"2020-01-08T23:01:32+0000"},{"title":"Appendix - Populate kafka topics as log_monitor user","text":"%sh\ncat << EOF > /tmp/forex.csv\nUTC time,EUR/USD\n2018-03-26T09:00:00Z,1.231\n2018-03-26T10:00:00Z,1.232\n2018-03-26T11:00:00Z,1.233\n2018-03-26T12:00:00Z,1.231\n2018-03-26T13:00:00Z,1.234\n2018-03-26T14:00:00Z,1.230\n2018-03-26T15:00:00Z,1.232\nEOF\n\n\ncat << EOF > /tmp/private.csv\n123-45-67890\n321-54-09876\n800-60-32982\n333-22-09873\n222-98-21816\n111-44-91021\n999-11-56101\n098-45-10927\nEOF\n\n\ncat << EOF > /tmp/jaas.conf\nKafkaClient {\ncom.sun.security.auth.module.Krb5LoginModule required\nuseTicketCache=true;\n};\nEOF\n\ncat << EOF > /tmp/client.properties\nsecurity.protocol=SASL_PLAINTEXT\nsasl.kerberos.service.name=kafka\nEOF\n\n\nkinit -kt /etc/security/keytabs/log_monitor.keytab log_monitor/$(hostname -f)@CLOUDERA.COM\n\nexport KAFKA_OPTS=\"-Djava.security.auth.login.config=/tmp/jaas.conf\"\n\n#push data to kafka topics\n/opt/cloudera/parcels/CDH/lib/kafka/bin/kafka-console-producer.sh --producer.config /tmp/client.properties --broker-list $(hostname -f):9092 --topic PRIVATE   < /tmp/private.csv\n/opt/cloudera/parcels/CDH/lib/kafka/bin/kafka-console-producer.sh --producer.config /tmp/client.properties --broker-list $(hostname -f):9092 --topic FOREX   < /tmp/forex.csv\n\n\n","user":"joe_analyst","dateUpdated":"2020-01-08T23:01:44+0000","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":">>>>>>>>>[2019-01-25 22:34:06,829] WARN [Principal=null]: TGT renewal thread has been interrupted and will exit. (org.apache.kafka.common.security.kerberos.KerberosLogin)\n>>>>>>>>>[2019-01-25 22:34:08,598] WARN [Principal=null]: TGT renewal thread has been interrupted and will exit. (org.apache.kafka.common.security.kerberos.KerberosLogin)\n"}]},"apps":[],"jobName":"paragraph_1567666453219_1373723414","id":"20190125-223154_28533009","dateCreated":"2019-09-05T06:54:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:13246"},{"user":"joe_analyst","dateUpdated":"2020-01-08T23:01:49+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true,"editorHide":false,"tableHide":false,"title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1567666453220_1039567523","id":"20190805-162910_375371427","dateCreated":"2019-09-05T06:54:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:13252","title":"Appendix - Populate hbase table  as etl_user ","text":"%sh\nkinit -kt /etc/security/keytabs/etl_user.keytab etl_user/$(hostname -f)@CLOUDERA.COM\n\ncat << EOF > /tmp/hbase.sh\ncreate 't_private','cf1','cf2'\ncreate 't_forex','cf1','cf2'\nlist\nexit\nEOF\n\n\nhbase shell /tmp/hbase.sh"}],"name":"Demos / Security / WorldWideBank / Joe-Analyst","id":"2EKX5F5MF","noteParams":{},"noteForms":{},"angularObjects":{"sh:shared_process":[],"jdbc:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}
